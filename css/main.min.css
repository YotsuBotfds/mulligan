:root{--bg:#1a2e1a;--surface:#2d2416;--card:#2d2416;--accent:#d4a574;--accent2:#b8956a;--text:#f5f0e8;--muted:#b8b8b8;--border:#4a6d4a;--hero-grad:linear-gradient(135deg,#2d2416 0,#1a2e1a 50%,#2d2416 100%);--spacing-xs:0.5rem;--spacing-sm:0.75rem;--spacing-md:1rem;--spacing-lg:1.25rem;--spacing-xl:1.5rem;--spacing-2xl:2rem;--spacing-3xl:2.5rem;--spacing-4xl:3rem;--font-serif:Georgia,'Times New Roman',serif;--font-size-xs:0.7rem;--font-size-sm:0.75rem;--font-size-base:0.8rem;--font-size-md:0.85rem;--font-size-lg:0.9rem;--font-size-xl:1rem;--font-size-2xl:1.1rem;--font-size-3xl:1.15rem;--font-size-4xl:1.8rem;--font-size-5xl:2.4rem;--font-size-heading:1.4rem;--border-radius-sm:6px;--border-radius-md:8px;--border-radius-lg:10px;--border-radius-xl:12px;--transition-fast:0.1s;--transition-normal:0.2s;--transition-slow:0.3s;--container-max-width:1100px;--grid-min-width:300px;--toc-grid-min:175px;--modal-max-height:80vh;--shadow-sm:0 4px 12px rgba(0,0,0,0.3);--shadow-md:0 8px 25px rgba(212,165,116,0.15);--shadow-lg:0 10px 40px rgba(0,0,0,0.5);--color-winter:#7ec8e3;--color-critical:#d4a574;--color-danger:#ff6b6b;--color-success:#53d8a8;--color-purple:#b19cd9}[data-theme="light"]{--bg:#f5f0e8;--surface:#fff;--card:#f0ebe0;--accent:#8b6f47;--accent2:#4a6d4a;--text:#1a2e1a;--muted:#444444;--border:#d4c9b4;--hero-grad:linear-gradient(135deg,#e8e0d0 0,#f5f0e8 50%,#fff 100%)}*{box-sizing:border-box;margin:0;padding:0}body{background:var(--bg);color:var(--text);font-family:Georgia,'Times New Roman',serif;line-height:1.6;min-height:100vh}.skip-link{background:var(--accent);border-radius:0 0 var(--border-radius-md) 0;color:#fff;font-size:0.9rem;left:0;padding:8px 16px;position:absolute;top:-50px;transition:top 0.2s;z-index:1000}.skip-link:focus{top:0}*:focus-visible{outline:2px solid var(--accent);outline-offset:2px}button:focus-visible,a:focus-visible,input:focus-visible,select:focus-visible,textarea:focus-visible,[tabindex]:focus-visible{outline:2px solid var(--accent);outline-offset:2px}[data-theme="dark"] *:focus-visible{outline-color:var(--accent)}[data-theme="light"] *:focus-visible{outline-color:var(--accent)}.card:focus-visible{outline:2px solid var(--accent);outline-offset:4px}button:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.filter-btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}#search:focus-visible{border-color:var(--accent);outline:2px solid var(--accent);outline-offset:2px}a:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.toc-item:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.reading-order-link:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.tool-card:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.recent-card:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.top-bar{align-items:center;background:var(--surface);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;padding:0.5rem 2rem;position:sticky;top:0;z-index:100}.top-bar-left{align-items:center;display:flex;gap:1rem}.top-bar-right{align-items:center;display:flex;gap:1rem}.top-bar a{border:1px solid var(--border);border-radius:var(--border-radius-sm);color:var(--accent2);font-size:0.85rem;padding:4px 10px;text-decoration:none;transition:all var(--transition-normal)}.top-bar a:hover{border-color:var(--accent);color:var(--accent)}#theme-toggle{background:0;border:1px solid var(--border);border-radius:var(--border-radius-sm);color:var(--text);cursor:pointer;font-size:1.1rem;padding:4px 10px;transition:all var(--transition-normal)}#theme-toggle:hover{border-color:var(--accent)}.progress-summary{color:var(--muted);font-size:0.8rem}.progress-summary .count{color:var(--accent2);font-weight:700}.keyboard-hint{color:var(--muted);display:none;font-size:0.75rem}@media (min-width:768px){.keyboard-hint{display:block}}.hero{background:var(--hero-grad);border-bottom:2px solid var(--accent);padding:1.5rem 2rem 1.25rem;text-align:center}.hero h1{font-size:1.6rem;font-weight:800;letter-spacing:-0.5px;margin-bottom:0.75rem}.hero .accent{color:var(--accent)}.quick-search{margin:0 auto;max-width:480px;position:relative}.quick-search input{background:var(--surface);border:2px solid var(--border);border-radius:var(--border-radius-md);color:var(--text);font-size:1rem;padding:10px 16px 10px 38px;transition:border-color 0.2s;width:100%}.quick-search input:focus{border-color:var(--accent);box-shadow:0 0 15px rgba(212,165,116,0.2);outline:0}.quick-search input::placeholder{color:var(--muted)}.quick-search .search-icon{color:var(--muted);font-size:1rem;left:12px;position:absolute;top:50%;transform:translateY(-50%)}.quick-search .results{background:var(--surface);border:1px solid var(--border);border-radius:0 0 8px 8px;display:none;left:0;max-height:300px;overflow-y:auto;position:absolute;right:0;top:100%;z-index:50}.quick-search .results.active{display:block}.quick-search .results a{border-bottom:1px solid var(--border);color:var(--text);display:block;font-size:0.9rem;padding:10px 16px;text-decoration:none;transition:background 0.1s}.quick-search .results a:hover{background:var(--card)}.quick-search .results a .match-cat{color:var(--accent);font-size:0.75rem;text-transform:uppercase}.search-highlight{background:rgba(212,165,116,0.3);color:var(--accent);font-weight:600;padding:0 2px}[data-theme="light"] .search-highlight{background:rgba(139,111,71,0.2);color:#8b6f47}.recent-searches{padding:0}.search-category-header{background:var(--card);color:var(--accent);font-size:0.75rem;font-weight:700;letter-spacing:1px;padding:8px 16px 6px;text-transform:uppercase;border-bottom:1px solid var(--border)}.search-recent-item,.search-result{border-bottom:1px solid var(--border);color:var(--text);display:block;padding:10px 16px;text-decoration:none;transition:background 0.1s,border-left-color 0.1s;border-left:3px solid transparent}.search-recent-item:hover,.search-result:hover{background:var(--card);border-left-color:var(--accent)}.search-result.active{background:var(--card);border-left-color:var(--accent);border-left-width:3px}.search-result-content{display:flex;flex-direction:column;gap:4px}.search-result-title{color:var(--text);font-size:0.9rem;font-weight:600}.search-result-desc{color:var(--muted);font-size:0.8rem;line-height:1.4;white-space:normal;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.container{margin:0 auto;max-width:1100px;padding:2rem}.section-label{align-items:center;color:var(--accent);display:flex;font-size:0.85rem;font-weight:700;gap:0.75rem;letter-spacing:2px;margin:2rem 0 1rem;text-transform:uppercase}.section-label::after{background:var(--border);content:'';flex:1;height:1px}.section-count{color:var(--muted);font-size:0.7rem;font-weight:400}.grid{display:grid;gap:1.25rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));margin-bottom:1rem}.card-section{display:grid;gap:1.25rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));margin-bottom:1rem}.section-heading{align-items:center;border:none;border-bottom:none;color:var(--accent);display:flex;font-size:1rem;font-weight:700;gap:0.75rem;letter-spacing:2px;margin:2.5rem 0 1rem;padding:0;scroll-margin-top:60px;text-transform:uppercase}.section-heading::after{background:var(--border);content:'';flex:1;height:1px}.section-heading .section-count{font-size:0.75rem;font-weight:400;letter-spacing:normal;opacity:0.7;text-transform:none}.reading-order-banner{margin:0 auto;max-width:var(--max-width,1200px);padding:0 var(--gutter,1.5rem)}.reading-order-link{align-items:center;background:linear-gradient(135deg,rgba(45,74,45,0.8) 0%,rgba(26,58,26,0.8) 100%);border:2px solid var(--accent);border-radius:var(--border-radius-xl);color:var(--text);display:flex;gap:1rem;padding:1rem 1.5rem;text-decoration:none;transition:transform 0.2s,box-shadow 0.2s}.reading-order-link:hover{box-shadow:0 4px 16px rgba(0,0,0,0.3);transform:translateY(-2px)}.banner-icon{font-size:2em;line-height:1}.banner-text{flex:1}.banner-text strong{color:var(--accent);display:block;font-size:1.15em}.banner-text span{font-size:0.85em;opacity:0.8}.banner-arrow{color:var(--accent);font-size:1.5em}.toc-nav{margin:1.25rem auto;max-width:var(--max-width,1200px);padding:0 var(--gutter,1.5rem)}.toc-title{border-bottom:1px solid var(--border);color:var(--accent);font-size:1.1rem;font-weight:700;letter-spacing:2px;margin-bottom:0.75rem;padding-bottom:0.5rem;text-transform:uppercase}.toc-grid{display:grid;gap:0.5rem;grid-template-columns:repeat(auto-fill,minmax(175px,1fr))}.toc-item{align-items:center;background:var(--card-bg,rgba(255,255,255,0.05));border:1px solid var(--border,rgba(212,165,116,0.2));border-radius:var(--border-radius-md);color:var(--text);display:flex;font-size:0.85rem;gap:0.5rem;padding:0.6rem 0.8rem;text-decoration:none;transition:background 0.2s,border-color 0.2s}.toc-item:hover{background:rgba(212,165,116,0.12);border-color:var(--accent)}.toc-icon{font-size:1.1em}.recently-viewed{margin-bottom:2.5rem;padding:0}.recently-viewed .section-heading{margin:0 0 1rem;font-size:1rem}.recent-cards{display:flex;flex-wrap:wrap;gap:1rem}.recent-card{align-items:center;background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-lg);color:var(--text);display:flex;flex:1;gap:1rem;min-width:250px;padding:1rem;text-decoration:none;transition:all var(--transition-normal)}.recent-card:hover{border-color:var(--accent);box-shadow:0 4px 16px rgba(212,165,116,0.1);transform:translateY(-1px)}.recent-card:focus{outline:2px solid var(--accent);outline-offset:2px}.recent-card .recent-icon{display:block;flex-shrink:0;font-size:1.8rem}.recent-card .recent-info{display:flex;flex-direction:column;flex:1;gap:0.25rem}.recent-card h4{color:var(--text);font-size:0.95rem;font-weight:600;line-height:1.3;margin:0}.recent-card .time-ago{color:var(--muted);font-size:0.8rem}.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-xl);color:var(--text);overflow:hidden;padding:1.5rem;position:relative;text-decoration:none;transition:all var(--transition-normal)}.card:hover{border-color:var(--accent);box-shadow:var(--shadow-md);transform:translateY(-2px)}.card:focus{outline:2px solid var(--accent);outline-offset:2px}.card .icon{display:block;font-size:2rem;margin-bottom:0.75rem}.card h3{font-size:1.15rem;font-weight:700;margin-bottom:0.4rem}.card p{color:var(--muted);font-size:0.9rem;line-height:1.5}.card .tag{background:var(--card);border-radius:20px;color:var(--accent2);display:inline-block;font-size:0.7rem;letter-spacing:1px;margin-top:0.75rem;padding:2px 8px;text-transform:uppercase}.card .tag.dr-stone{color:#d4a574}.card .tag.start-here{color:var(--color-danger);font-weight:700}.card .tag.new-guide{animation:pulse 2s infinite;background:rgba(212,165,116,0.15);color:var(--color-danger);font-weight:700}.card .tag.winter{color:var(--color-winter);font-weight:700}.card .tag.scavenge{color:#d4a574;font-weight:700}.card .tag.bottleneck{color:var(--color-danger);font-weight:700}.card .tag.chemical{color:#d4a574;font-weight:700}.card .tag.civic{color:var(--color-purple);font-weight:700}.card .tag.regional{color:var(--color-winter);font-weight:700}.card .tag.dangerous{color:#d4a574;font-weight:700}.card .read-check{align-items:center;border:2px solid var(--border);border-radius:50%;color:transparent;display:flex;font-size:0.75rem;height:24px;justify-content:center;position:absolute;right:12px;top:12px;transition:all var(--transition-normal);width:24px}.card .read-check.done{background:var(--accent2);border-color:var(--accent2);color:#fff}.card .practice-btn{align-items:center;background:var(--card);border:1px solid var(--border);border-radius:var(--border-radius-sm);bottom:12px;color:var(--text);cursor:pointer;display:flex;font-size:1rem;height:32px;justify-content:center;left:12px;padding:0;position:absolute;transition:all var(--transition-normal);width:32px;z-index:2}.card .practice-btn:hover{background:rgba(212,165,116,0.1);border-color:var(--accent);color:var(--accent);transform:scale(1.05)}.card .practice-btn:active{transform:scale(0.95)}.card .practice-btn.practiced{background:rgba(83,216,168,0.2);border-color:var(--color-success);color:var(--color-success);font-weight:600}.card .practice-btn.practiced:hover{background:rgba(83,216,168,0.3);border-color:var(--color-success);color:var(--color-success)}.card .practice-icon{display:block;font-size:1rem;line-height:1}.card .reading-time{color:var(--muted);display:block;font-size:0.75rem;margin-top:0.75rem;opacity:0.8;transition:opacity 0.2s}.card:hover .reading-time{opacity:1}.card .prerequisites{background:rgba(212,165,116,0.1);border-left:3px solid var(--accent);color:var(--text);font-size:0.75rem;margin-top:0.75rem;padding:0.5rem 0.75rem;border-radius:4px;line-height:1.4}.card .prerequisites strong{color:var(--accent);font-weight:700}.card .prerequisites-single{margin-top:0.75rem}.difficulty-badge{background:rgba(212,165,116,0.2);border-radius:4px;color:var(--accent);display:inline-block;font-size:0.65rem;font-weight:600;margin:4px 0 0 0;padding:2px 6px;position:absolute;right:12px;text-transform:uppercase;top:40px;transition:background 0.2s,color 0.2s}.difficulty-badge.difficulty-beginner{background:rgba(83,216,168,0.2);color:var(--color-success);border:1px solid var(--color-success)}.difficulty-badge.difficulty-intermediate{background:rgba(255,193,7,0.2);color:#ffc107;border:1px solid #ffc107}.difficulty-badge.difficulty-advanced{background:rgba(255,107,107,0.2);color:var(--color-danger);border:1px solid var(--color-danger)}.card:hover .difficulty-badge{background:var(--accent);border-color:var(--accent);color:var(--bg)}.achievement-toast{animation:slideInRight 0.3s ease-out;background:var(--accent2);bottom:100px;border-radius:var(--border-radius-md);box-shadow:var(--shadow-sm);color:#fff;max-width:300px;padding:16px 20px;position:fixed;right:20px;z-index:1000}.achievement-toast.hide{animation:slideOutRight 0.3s ease-out forwards}.achievement-toast .icon{display:inline-block;font-size:1.5rem;margin-right:10px}.achievement-toast .text{display:inline-block}.achievement-toast .title{display:block;font-weight:700}.achievement-toast .desc{display:block;font-size:0.85rem;opacity:0.9}#achievements-modal{align-items:center;background:rgba(0,0,0,0.7);bottom:0;display:none;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}#achievements-modal.active{display:flex}.achievements-modal-content{background:var(--surface);border:2px solid var(--accent2);border-radius:var(--border-radius-xl);box-shadow:var(--shadow-lg);max-height:80vh;max-width:600px;overflow-y:auto;padding:2rem}.achievements-modal-content h2{color:var(--accent2);font-size:1.8rem;margin-bottom:1.5rem}.achievements-grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.achievement-item{background:var(--card);border:2px solid var(--border);border-radius:var(--border-radius-md);padding:1rem;text-align:center;transition:all var(--transition-normal)}.achievement-item.unlocked{background:rgba(83,216,168,0.1);border-color:var(--accent2)}.achievement-item.unlocked .icon{opacity:1;transform:scale(1)}.achievement-item .icon{display:block;font-size:2.5rem;margin-bottom:0.5rem;opacity:0.4;transition:all var(--transition-normal)}.achievement-item .name{color:var(--text);font-size:0.9rem;font-weight:700;margin:0.5rem 0}.achievement-item .desc{color:var(--muted);font-size:0.75rem;line-height:1.3}.achievement-item.unlocked .name{color:var(--accent2)}.achievement-progress{margin-top:0.75rem;padding-top:0.75rem;border-top:1px solid var(--border)}.achievement-progress .progress-bar{background:var(--border);height:6px;border-radius:3px;overflow:hidden;margin-bottom:0.5rem}.achievement-progress .progress-fill{background:linear-gradient(90deg,var(--accent2),var(--accent));height:100%;transition:width 0.3s ease}.achievement-progress .progress-text{color:var(--accent);font-size:0.65rem;font-weight:600;text-align:center}.achievements-close{background:var(--card);border:1px solid var(--border);border-radius:var(--border-radius-sm);color:var(--text);cursor:pointer;margin-top:1.5rem;padding:10px 20px;transition:all var(--transition-normal);width:100%}.achievements-close:hover{border-color:var(--accent);color:var(--accent)}.divider{border:0;border-top:2px dashed var(--border);margin:2.5rem 0 0.5rem}.divider-label{color:var(--accent);font-size:0.75rem;font-weight:700;letter-spacing:3px;margin-bottom:0.5rem;text-align:center;text-transform:uppercase}.footer{border-top:1px solid var(--border);color:var(--muted);font-size:0.75rem;margin-top:2rem;padding:1rem;text-align:center}#back-to-top{background:var(--accent);border:0;border-radius:50%;bottom:2rem;box-shadow:var(--shadow-sm);color:#fff;cursor:pointer;display:none;font-size:1.2rem;height:44px;position:fixed;right:2rem;transition:transform 0.2s;width:44px;z-index:99}#back-to-top:hover{transform:scale(1.1)}.filter-bar{display:flex;flex-wrap:wrap;align-items:center;gap:0.4rem;margin-bottom:1rem;padding:0}.filter-btn{background:transparent;border:1px solid var(--border);border-radius:20px;color:var(--muted);cursor:pointer;font-size:0.8rem;padding:4px 12px;transition:all var(--transition-normal)}.filter-btn:hover,.filter-btn.active{background:var(--accent);border-color:var(--accent);color:#fff}.situation-room{margin-bottom:2rem;padding:0}.situation-room h2{color:var(--accent);font-size:1.4rem;letter-spacing:2px;margin-bottom:1rem;text-align:center;text-transform:uppercase}.situation-room p.sr-subtitle{color:var(--muted);font-size:0.95rem;margin-bottom:1.5rem;text-align:center}.crisis-buttons{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.crisis-btn{background:var(--card);border:2px solid var(--border);border-radius:var(--border-radius-lg);color:var(--text);cursor:pointer;display:block;padding:1.25rem;text-align:center;text-decoration:none;transition:all var(--transition-normal)}.crisis-btn:hover{box-shadow:0 6px 20px rgba(233,69,96,0.2);transform:translateY(-3px)}.crisis-btn.critical{border-color:var(--accent)}.crisis-btn.critical:hover{background:rgba(212,165,116,0.15);border-color:var(--accent)}.crisis-btn.high{border-color:#d4a574}.crisis-btn.high:hover{background:rgba(255,179,71,0.1);border-color:#d4a574}.crisis-btn.medium{border-color:var(--accent2)}.crisis-btn.medium:hover{background:rgba(83,216,168,0.1);border-color:var(--accent2)}.crisis-btn .cr-icon{display:block;font-size:2.2rem;margin-bottom:0.5rem}.crisis-btn h3{font-size:1rem;font-weight:700;margin-bottom:0.3rem}.crisis-btn p{color:var(--muted);font-size:0.8rem;margin:0}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.6}}@keyframes slideInRight{from{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateX(0)}}@keyframes slideOutRight{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(100%)}}#offline-manager-modal{align-items:center;background:rgba(0,0,0,0.7);bottom:0;display:none;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}#offline-manager-modal.active{display:flex}.offline-manager-overlay{position:absolute;width:100%;height:100%}.offline-manager-content{background:var(--surface);border:2px solid var(--accent2);border-radius:var(--border-radius-xl);box-shadow:var(--shadow-lg);display:flex;flex-direction:column;max-height:80vh;max-width:700px;position:relative;width:90%;z-index:1001}.offline-manager-header{align-items:center;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;padding:1.5rem}.offline-manager-header h2{color:var(--accent2);font-size:1.4rem;margin:0}.offline-manager-close{background:none;border:none;color:var(--muted);cursor:pointer;font-size:1.8rem;padding:0;transition:color 0.2s}.offline-manager-close:hover{color:var(--accent)}.offline-manager-body{display:flex;flex-direction:column;flex:1;overflow:hidden}.offline-info-bar{background:rgba(212,165,116,0.05);border-bottom:1px solid var(--border);display:flex;gap:2rem;padding:1rem 1.5rem}.offline-info-item{display:flex;flex-direction:column;gap:0.25rem}.offline-info-label{color:var(--muted);font-size:0.75rem;font-weight:600;text-transform:uppercase}.offline-info-value{color:var(--accent);font-size:1.1rem;font-weight:700}.offline-manager-tabs{border-bottom:1px solid var(--border);display:flex;gap:0;padding:0 1.5rem}.offline-tab-btn{background:none;border:none;border-bottom:2px solid transparent;color:var(--muted);cursor:pointer;flex:1;font-size:0.9rem;font-weight:600;padding:1rem 0;text-align:center;transition:all var(--transition-normal)}.offline-tab-btn:hover{color:var(--accent)}.offline-tab-btn.active{border-bottom-color:var(--accent);color:var(--accent)}.offline-tab-content{display:none;flex:1;overflow-y:auto}.offline-tab-content.active{display:flex;flex-direction:column}.offline-actions{display:flex;gap:1rem;padding:1.5rem}.offline-action-btn{background:var(--card);border:1px solid var(--border);border-radius:var(--border-radius-md);color:var(--text);cursor:pointer;flex:1;font-size:0.9rem;font-weight:600;padding:0.75rem 1rem;transition:all var(--transition-normal)}.offline-action-btn:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}.offline-action-btn:disabled{opacity:0.5;cursor:not-allowed}.offline-categories-list{flex:1;overflow-y:auto;padding:1rem 1.5rem}.offline-empty{align-items:center;color:var(--muted);display:flex;height:100%;justify-content:center;text-align:center}.offline-category-item{background:var(--card);border:1px solid var(--border);border-radius:var(--border-radius-md);margin-bottom:1rem;padding:1rem;transition:all var(--transition-normal)}.offline-category-item:hover{border-color:var(--accent)}.offline-category-header{align-items:center;display:flex;justify-content:space-between;gap:1rem}.offline-category-info{flex:1}.offline-category-name{color:var(--text);font-size:0.95rem;font-weight:600;margin:0 0 0.25rem}.offline-category-meta{color:var(--muted);font-size:0.8rem;margin:0}.offline-category-controls{display:flex;align-items:center}.offline-toggle-switch{display:inline-block;position:relative;width:40px;height:24px}.offline-toggle{display:none}.offline-toggle-slider{background-color:var(--border);border-radius:24px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0;transition:background-color 0.2s}.offline-toggle-slider:before{background-color:var(--text);border-radius:50%;bottom:2px;content:'';height:20px;left:2px;position:absolute;transition:transform 0.2s;width:20px}.offline-toggle:checked+.offline-toggle-slider{background-color:var(--accent)}.offline-toggle:checked+.offline-toggle-slider:before{transform:translateX(16px)}.offline-category-progress{margin-top:1rem}.offline-progress-bar{background:var(--border);border-radius:4px;height:8px;overflow:hidden;width:100%}.offline-progress-fill{background:linear-gradient(90deg,var(--accent),var(--accent2));height:100%;transition:width 0.3s ease;width:0%}.offline-progress-text{color:var(--muted);font-size:0.75rem;margin:0.5rem 0 0}.offline-progress-percent{color:var(--accent);font-weight:600}.offline-category-cached{margin-top:0.75rem}.offline-cached-text{color:var(--accent);font-size:0.8rem;margin:0}.offline-help-content{padding:1.5rem;overflow-y:auto;flex:1}.offline-help-content h3{color:var(--accent2);font-size:1.1rem;margin:0 0 1rem}.offline-help-content ul{color:var(--text);font-size:0.9rem;line-height:1.6;list-style:none;margin:0 0 1rem;padding:0}.offline-help-content li{margin-bottom:0.75rem;padding-left:1.5rem;position:relative}.offline-help-content li:before{content:'✓';color:var(--accent);font-weight:bold;left:0;position:absolute}.offline-help-content p{color:var(--muted);font-size:0.85rem;line-height:1.5}.offline-badge{background:rgba(212,165,116,0.2);border:1px solid var(--accent);border-radius:4px;color:var(--accent);display:inline-block;font-size:0.7rem;font-weight:600;padding:0.25rem 0.5rem;position:absolute;right:0.5rem;top:0.5rem}@media (max-width:600px){.offline-manager-content{width:95%;max-height:90vh}.offline-info-bar{flex-direction:column;gap:0.75rem}.offline-actions{flex-direction:column}.offline-manager-header{padding:1rem}.offline-manager-header h2{font-size:1.1rem}}@media (prefers-reduced-motion:reduce){*{animation:none !important;transition:none !important}.card .tag.new-guide{animation:none !important;opacity:1}.achievement-toast{animation:none !important;opacity:1;bottom:100px;right:20px}.achievement-toast.hide{animation:none !important;opacity:0}.card{transition:none !important}.card:hover{transform:none;border-color:var(--accent)}.recent-card:hover{transform:none}.reading-order-link:hover{transform:none}.learning-path-card:hover{transform:none}.crisis-btn:hover{transform:none}#back-to-top:hover{transform:none}.btn-start-path:hover{transform:none}.btn-start-path:active{transform:none}.card .share-btn:hover{transform:none}.card .share-btn:active{transform:none}@keyframes pulse{0%,100%{opacity:1}50%{opacity:1}}@keyframes slideInRight{from{opacity:1;transform:translateX(0)}to{opacity:1;transform:translateX(0)}}@keyframes slideOutRight{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(0)}}@keyframes slideDown{from{opacity:1;transform:translateY(0)}to{opacity:1;transform:translateY(0)}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes slideInUp{from{opacity:1;transform:translateY(0)}to{opacity:1;transform:translateY(0)}}}@media (max-width:480px){:root{font-size:14px}.grid,.card-section{grid-template-columns:1fr}.hero h1{font-size:1.8rem}.stats{gap:1.5rem}.top-bar{flex-wrap:wrap;padding:0.5rem 1rem}.quick-search{margin-top:1rem}nav ul{columns:1}}@media (max-width:768px) and (orientation:landscape){.hero{padding:1.5rem}.stats{gap:1.5rem}}@media (max-width:600px){.toc-grid{grid-template-columns:repeat(2,1fr)}}@page{margin:2cm;size:A4}@media print{*{background:transparent !important;box-shadow:none !important;text-shadow:none !important}html,body{margin:0;padding:0}body{background:#fff !important;color:#000 !important;font-size:11pt;line-height:1.6}h1,h2,h3,h4,h5,h6{color:#000 !important;page-break-after:avoid}h1{page-break-before:always;margin-top:1.5cm}h1:first-of-type{page-break-before:avoid}h2{page-break-before:auto;margin-top:1cm}nav,.top-bar,.back-link,.breadcrumb,.footer,#back-to-top,.tools-bar,.filter-bar,.quick-search,.keyboard-hint,#theme-toggle,button:not(.no-print),input,.read-check,.theme-toggle,.search-icon,.crisis-buttons,.achievement-toast,#achievements-modal,[role="navigation"]{display:none !important}.hero{background:#fff !important;border-bottom:2px solid #000;padding:1rem 0}.hero h1{font-size:2rem;margin-bottom:0.5rem}.hero .subtitle,.hero .accent{color:#000 !important;font-size:1rem}.stats{margin-bottom:1rem}.stat .num{color:#000 !important;font-size:1.4rem}.stat .label{color:#666 !important;font-size:0.85rem}a{color:#000 !important;text-decoration:underline}a[href]::after{content:" (" attr(href) ")";font-size:0.85em;color:#666}section{page-break-inside:avoid;margin-bottom:1rem}.section-heading,.section-label{page-break-after:avoid;color:#000 !important}.section-heading::after,.section-label::after{background:#000 !important}p{margin-bottom:0.5rem;orphans:3;widows:3}ul,ol{margin-left:1.5rem;margin-bottom:0.5rem}li{margin-bottom:0.25rem;page-break-inside:avoid}.grid{display:block}.card{background:#fff !important;border:1px solid #000;break-inside:avoid;margin-bottom:0.75rem;page-break-inside:avoid;padding:12px}.card h3{color:#000 !important;margin-top:0;margin-bottom:0.4rem;font-size:1.1rem}.card p{color:#000 !important;margin-bottom:0.3rem}.card .icon{display:none}.card .tag{background:#fff !important;border:1px solid #000;color:#000 !important;font-size:0.7rem;margin:0.5rem 0.25rem 0 0;padding:2px 6px}.toc-nav,.toc-grid,.toc-item{display:none}code{background:#f5f5f5 !important;border:1px solid #ddd;color:#000 !important;padding:2px 4px;border-radius:3px}pre{background:#f5f5f5 !important;border:1px solid #ddd;color:#000 !important;padding:10px;margin:0.75rem 0;page-break-inside:avoid;overflow-x:visible;word-wrap:break-word;font-size:0.9em}pre code{background:transparent !important;border:none;padding:0}table{width:100%;border-collapse:collapse;margin:0.75rem 0;page-break-inside:avoid;background:#fff !important;font-size:0.95rem}th{background:#e8e8e8 !important;color:#000 !important;border:1px solid #000;padding:6px;text-align:left;font-weight:600}td{background:#fff !important;color:#000 !important;border:1px solid #999;padding:6px}tr{page-break-inside:avoid}tr:hover{background:transparent !important}svg{max-width:100%;page-break-inside:avoid;background:#fff !important;color:#000 !important}svg text,svg tspan{fill:#000 !important;color:#000 !important}svg path,svg line,svg rect,svg circle,svg polygon{stroke:#000 !important;fill:#fff !important}img{max-width:100%;page-break-inside:avoid;filter:grayscale(100%) !important}.situation-room{background:#fff !important;border:2px solid #000;page-break-inside:avoid;padding:1rem}.situation-room h2{color:#000 !important;font-size:1.2rem}.divider{border-top:1px solid #000;margin:1rem 0}.divider-label{color:#000 !important}.hidden,[hidden],.sr-only{display:none !important}.reading-order-banner,.reading-order-link{display:none !important}.container{max-width:100%;margin:0;padding:0}body,.container,section,article,main,div{overflow:visible !important;clip:auto !important}strong{color:#000 !important;font-weight:700}em{font-style:italic}body{margin:0;padding:0}.skip-link{display:none !important}}@page{margin:2cm}#offline-banner-container{position:fixed;top:0;left:0;right:0;z-index:1001;pointer-events:none}.offline-banner{background:#f59e0b;color:#1a2e1a;padding:12px 20px;text-align:center;font-weight:600;font-size:0.95rem;letter-spacing:0.5px;position:relative;animation:slideDown 0.3s ease-out;pointer-events:auto;box-shadow:0 2px 8px rgba(0,0,0,0.2)}.offline-banner.online-banner{background:#10b981;color:#fff;animation:slideDown 0.3s ease-out,fadeOut 0.3s ease-out 2.7s forwards}.offline-banner span{display:inline-block}@keyframes slideDown{from{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}.category-progress{background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-xl);margin-bottom:2.5rem;padding:1.5rem}.progress-section-title{color:var(--accent);font-size:1.3rem;margin-bottom:1.5rem;padding-bottom:0.75rem;border-bottom:2px solid var(--border)}.progress-item{display:flex;flex-direction:column;gap:0.75rem;margin-bottom:1.5rem;padding:1rem;background:var(--card);border:1px solid var(--border);border-radius:var(--border-radius-md);transition:all var(--transition-normal) ease}.progress-item:hover{border-color:var(--accent);box-shadow:0 2px 8px rgba(212,165,116,0.1)}.progress-item:last-child{margin-bottom:0}.progress-header{display:flex;justify-content:space-between;align-items:center;gap:1rem}.progress-category-name{display:flex;align-items:center;gap:0.75rem;color:var(--text);font-weight:600;font-size:0.95rem}.progress-icon{font-size:1.2rem;display:inline-block}.progress-count{color:var(--muted);font-size:0.85rem;font-weight:500;padding:0.25rem 0.75rem;background:rgba(212,165,116,0.1);border-radius:4px;min-width:60px;text-align:center}.progress-bar-container{display:flex;align-items:center;gap:1rem}.progress-bar{flex:1;height:24px;background:rgba(0,0,0,0.2);border:1px solid var(--border);border-radius:var(--border-radius-xl);overflow:hidden;position:relative}.progress-fill{height:100%;transition:width 0.4s ease;display:flex;align-items:center;justify-content:flex-end;padding-right:6px;box-shadow:inset 0 1px 3px rgba(0,0,0,0.3)}.progress-text{color:var(--text);font-weight:600;font-size:0.9rem;min-width:45px;text-align:right}.progress-milestone{color:var(--accent);font-size:0.85rem;font-weight:600;padding:0.5rem 0.75rem;background:rgba(212,165,116,0.1);border-left:3px solid var(--accent);border-radius:4px;animation:slideInUp 0.3s ease}@keyframes slideInUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width:768px){.category-progress{padding:1rem}.progress-item{padding:0.75rem}.progress-header{flex-direction:column;align-items:flex-start}.progress-count{align-self:flex-end}.progress-bar-container{flex-direction:column;gap:0.5rem}.progress-text{align-self:flex-end}}.tools-section{margin-bottom:2rem}.tools-grid{display:grid;gap:1.25rem;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));margin-bottom:1rem}.tool-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-xl);color:var(--text);display:flex;flex-direction:column;gap:0.75rem;overflow:hidden;padding:1.5rem;text-decoration:none;transition:all var(--transition-normal)}.tool-card:hover{border-color:var(--accent);box-shadow:var(--shadow-md);transform:translateY(-2px)}.tool-card:focus{outline:2px solid var(--accent);outline-offset:2px}.tool-card .tool-icon{display:block;font-size:2.5rem;line-height:1}.tool-card h3{font-size:1.15rem;font-weight:700;margin:0;color:var(--accent)}.tool-card p{color:var(--muted);font-size:0.9rem;line-height:1.5;margin:0;flex-grow:1}.card .share-btn{align-items:center;background:var(--card);border:1px solid var(--border);border-radius:var(--border-radius-sm);bottom:12px;color:var(--text);cursor:pointer;display:flex;font-size:1rem;height:32px;justify-content:center;padding:0;position:absolute;right:12px;transition:all var(--transition-normal);width:32px;z-index:2}.card .share-btn:hover{background:var(--accent);border-color:var(--accent);color:#fff;transform:scale(1.1)}.card .share-btn:active{transform:scale(0.95)}.share-toast{animation:slideInUp 0.3s ease-out;background:var(--accent2);border-radius:var(--border-radius-md);bottom:2rem;box-shadow:var(--shadow-sm);color:#fff;font-size:0.95rem;font-weight:500;left:50%;max-width:320px;opacity:0;padding:12px 20px;position:fixed;text-align:center;transform:translateX(-50%) translateY(100px);transition:opacity 0.3s ease,transform 0.3s ease;z-index:1001}.share-toast.show{opacity:1;transform:translateX(-50%) translateY(0)}@keyframes slideInUp{from{opacity:0;transform:translateX(-50%) translateY(100px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}.learning-paths-section{background:var(--bg);padding:var(--spacing-4xl) var(--spacing-2xl)}.learning-paths-wrapper{margin:0 auto;max-width:var(--container-max-width)}.learning-paths-section .section-title{color:var(--accent);font-size:var(--font-size-4xl);font-weight:800;margin-bottom:var(--spacing-md)}.learning-paths-section .section-subtitle{color:var(--muted);font-size:var(--font-size-lg);margin-bottom:var(--spacing-3xl)}.start-here-recommendation{background:linear-gradient(135deg,rgba(212,165,116,0.1) 0%,rgba(184,149,106,0.05) 100%);border:2px solid var(--accent);border-radius:var(--border-radius-lg);margin-bottom:var(--spacing-3xl);padding:var(--spacing-2xl);position:relative}.start-here-recommendation::before{background:var(--accent);border-radius:50%;content:'';height:3px;left:0;position:absolute;top:0;width:100%}.recommendation-badge{background:var(--accent);border-radius:var(--border-radius-sm);color:var(--bg);display:inline-block;font-size:var(--font-size-sm);font-weight:700;margin-bottom:var(--spacing-md);padding:var(--spacing-xs) var(--spacing-sm);text-transform:uppercase;letter-spacing:1px}.recommendation-title{display:flex;align-items:center;gap:var(--spacing-md);font-size:var(--font-size-3xl);margin-bottom:var(--spacing-md)}.recommendation-title .icon{font-size:1.8rem}.recommendation-description{color:var(--text);font-size:var(--font-size-lg);margin-bottom:var(--spacing-lg);line-height:1.7}.btn-start-path{background:var(--accent);border:none;border-radius:var(--border-radius-md);color:var(--bg);cursor:pointer;font-size:var(--font-size-lg);font-weight:700;padding:var(--spacing-md) var(--spacing-lg);transition:all var(--transition-normal)}.btn-start-path:hover{background:var(--accent2);transform:translateX(4px)}.btn-start-path:active{transform:translateX(2px)}.learning-paths-grid{display:grid;gap:var(--spacing-2xl);grid-template-columns:repeat(auto-fill,minmax(320px,1fr));margin-top:var(--spacing-2xl)}.learning-path-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-lg);cursor:pointer;display:flex;flex-direction:column;gap:var(--spacing-md);padding:var(--spacing-2xl);position:relative;transition:all var(--transition-normal)}.learning-path-card:hover{border-color:var(--accent);box-shadow:0 8px 24px rgba(212,165,116,0.15);transform:translateY(-4px)}.path-header{display:flex;align-items:flex-start;justify-content:space-between;gap:var(--spacing-md)}.path-icon-title{display:flex;align-items:center;gap:var(--spacing-md);flex:1}.path-icon{font-size:2.4rem}.path-name{color:var(--text);font-size:var(--font-size-2xl);margin:0}.difficulty-badge{background:var(--border);border-radius:var(--border-radius-sm);font-size:var(--font-size-sm);font-weight:700;padding:var(--spacing-xs) var(--spacing-sm);text-transform:uppercase;white-space:nowrap}.difficulty-beginner{background:rgba(83,216,168,0.2);color:var(--color-success)}.difficulty-intermediate{background:rgba(212,165,116,0.2);color:#d4a574}.difficulty-advanced{background:rgba(177,156,217,0.2);color:var(--color-purple)}.path-description{color:var(--muted);font-size:var(--font-size-base);line-height:1.6;margin:0}.path-metadata{display:flex;gap:var(--spacing-lg);font-size:var(--font-size-sm)}.path-info{display:flex;gap:var(--spacing-xs)}.info-label{color:var(--muted)}.info-value{color:var(--accent);font-weight:700}.path-progress{margin-top:auto}.progress-bar-container{background:var(--border);border-radius:var(--border-radius-sm);height:8px;margin-bottom:var(--spacing-sm);overflow:hidden}.progress-bar{background:linear-gradient(90deg,var(--accent2) 0%,var(--accent) 100%);height:100%;transition:width 0.3s ease}.progress-text{color:var(--muted);font-size:var(--font-size-sm);margin:0}.progress-percentage{color:var(--accent);font-weight:700}.btn-view-path{background:transparent;border:1px solid var(--accent);border-radius:var(--border-radius-md);color:var(--accent);cursor:pointer;font-size:var(--font-size-base);font-weight:700;padding:var(--spacing-sm) var(--spacing-md);transition:all var(--transition-normal)}.btn-view-path:hover{background:var(--accent);color:var(--bg)}.learning-path-details-container{display:none;opacity:0;transition:opacity var(--transition-normal)}.learning-path-details-container.active{display:block;opacity:1}.path-details{background:var(--bg);padding:var(--spacing-4xl) var(--spacing-2xl);max-width:var(--container-max-width);margin:0 auto}.details-header{margin-bottom:var(--spacing-3xl)}.btn-back{background:transparent;border:1px solid var(--border);border-radius:var(--border-radius-md);color:var(--accent);cursor:pointer;font-size:var(--font-size-base);font-weight:700;margin-bottom:var(--spacing-lg);padding:var(--spacing-sm) var(--spacing-md);transition:all var(--transition-normal)}.btn-back:hover{border-color:var(--accent);background:rgba(212,165,116,0.1)}.details-header h2{color:var(--accent);font-size:var(--font-size-4xl);font-weight:800;margin:0}.details-info{background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-lg);padding:var(--spacing-2xl);margin-bottom:var(--spacing-3xl)}.details-info>p{color:var(--text);font-size:var(--font-size-lg);line-height:1.7;margin-bottom:var(--spacing-lg)}.path-stats{display:grid;gap:var(--spacing-lg);grid-template-columns:repeat(auto-fit,minmax(150px,1fr));margin-bottom:var(--spacing-2xl)}.stat{display:flex;flex-direction:column;gap:var(--spacing-xs)}.stat-label{color:var(--muted);font-size:var(--font-size-sm);text-transform:uppercase;letter-spacing:1px}.stat-value{color:var(--accent);font-size:var(--font-size-3xl);font-weight:800}.guides-list{margin-top:var(--spacing-3xl)}.guides-list h3{color:var(--accent);font-size:var(--font-size-2xl);margin-bottom:var(--spacing-lg)}.path-guide-item{background:var(--surface);border:1px solid var(--border);border-left:4px solid var(--border);border-radius:var(--border-radius-md);display:grid;grid-template-columns:40px 40px 1fr auto auto;align-items:center;gap:var(--spacing-md);padding:var(--spacing-lg);margin-bottom:var(--spacing-md);transition:all var(--transition-normal)}.path-guide-item:hover{border-color:var(--accent);border-left-color:var(--accent);background:rgba(212,165,116,0.05)}.path-guide-item.completed{border-left-color:var(--color-success);opacity:0.8}.guide-sequence{background:var(--border);border-radius:50%;color:var(--text);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:var(--font-size-sm);height:32px;width:32px}.path-guide-item.completed .guide-sequence{background:var(--color-success);color:var(--bg)}.guide-icon{font-size:1.4rem}.guide-info{display:flex;flex-direction:column;gap:var(--spacing-xs)}.guide-title{color:var(--text);font-size:var(--font-size-lg);margin:0}.guide-meta{color:var(--muted);font-size:var(--font-size-sm);margin:0;display:flex;gap:var(--spacing-md)}.reading-time{display:inline-flex;gap:var(--spacing-xs)}.reading-time::before{content:'⏱'}.difficulty{background:var(--border);border-radius:var(--border-radius-sm);padding:2px 6px;text-transform:uppercase;font-size:var(--font-size-xs);font-weight:700}.checkmark{color:var(--color-success);font-size:var(--font-size-2xl);font-weight:700}.guide-link{background:transparent;border:1px solid var(--border);border-radius:var(--border-radius-sm);color:var(--accent);cursor:pointer;font-size:var(--font-size-sm);font-weight:700;padding:var(--spacing-xs) var(--spacing-sm);text-decoration:none;transition:all var(--transition-normal);white-space:nowrap}.guide-link:hover{background:var(--accent);border-color:var(--accent);color:var(--bg)}@media (max-width:768px){.learning-paths-section{padding:var(--spacing-2xl) var(--spacing-lg)}.start-here-recommendation{padding:var(--spacing-lg)}.recommendation-title{font-size:var(--font-size-2xl)}.learning-paths-grid{gap:var(--spacing-lg);grid-template-columns:1fr}.path-details{padding:var(--spacing-2xl) var(--spacing-md)}.details-info{padding:var(--spacing-lg)}.path-stats{grid-template-columns:repeat(2,1fr);gap:var(--spacing-md)}.path-guide-item{grid-template-columns:32px 32px 1fr auto;gap:var(--spacing-sm);padding:var(--spacing-md)}.guide-link{padding:4px 8px;font-size:var(--font-size-xs)}.checkmark{display:none}}.random-guide-modal{align-items:center;background:rgba(0,0,0,0.7);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1100}.random-guide-modal-content{animation:slideInUp 0.3s ease-out;background:var(--surface);border:2px solid var(--accent);border-radius:16px;box-shadow:var(--shadow-lg);display:flex;flex-direction:column;gap:1.5rem;max-height:80vh;max-width:500px;padding:1.5rem;position:relative;width:90%}.random-guide-close-btn{background:none;border:none;color:var(--muted);cursor:pointer;font-size:2rem;padding:0;position:absolute;right:1rem;top:0.5rem;transition:color 0.2s;z-index:10}.random-guide-close-btn:hover{color:var(--accent)}.random-guide-preview-card{display:flex;flex-direction:column;gap:1rem;padding:1.5rem;background:var(--card);border:1px solid var(--border);border-radius:var(--border-radius-xl)}.random-guide-icon{font-size:3rem;text-align:center}.random-guide-content{display:flex;flex-direction:column;gap:0.75rem}.random-guide-title{color:var(--accent);font-size:1.4rem;font-weight:700;margin:0}.random-guide-badge-read,.random-guide-badge-unread{align-self:flex-start;border-radius:var(--border-radius-sm);font-size:0.75rem;font-weight:600;padding:0.35rem 0.75rem;text-transform:uppercase;letter-spacing:0.5px}.random-guide-badge-read{background:rgba(83,216,168,0.2);color:var(--color-success)}.random-guide-badge-unread{background:rgba(212,165,116,0.2);color:var(--accent)}.random-guide-description{color:var(--muted);font-size:0.9rem;line-height:1.6;margin:0}.random-guide-meta{display:flex;gap:0.75rem;flex-wrap:wrap}.random-guide-difficulty{border-radius:4px;font-size:0.75rem;font-weight:600;padding:0.3rem 0.6rem;text-transform:uppercase}.random-guide-reading-time{color:var(--muted);font-size:0.85rem;display:flex;align-items:center;gap:0.25rem}.random-guide-buttons{display:flex;gap:1rem;padding-top:0.5rem}.random-guide-btn{border-radius:var(--border-radius-md);cursor:pointer;flex:1;font-size:0.95rem;font-weight:600;padding:0.75rem 1rem;transition:all var(--transition-normal)}.random-guide-btn-primary{background:var(--accent);border:none;color:#fff}.random-guide-btn-primary:hover{background:var(--accent2);transform:translateY(-2px)}.random-guide-btn-primary:active{transform:translateY(0)}.random-guide-btn-secondary{background:transparent;border:2px solid var(--accent);color:var(--accent)}.random-guide-btn-secondary:hover{background:rgba(212,165,116,0.1);transform:translateY(-2px)}.random-guide-btn-secondary:active{transform:translateY(0)}.random-guide-btn:focus{outline:2px solid var(--accent);outline-offset:2px}@media (max-width:600px){.random-guide-modal-content{width:95%;max-height:90vh;padding:1.25rem;gap:1.25rem}.random-guide-preview-card{padding:1rem;gap:0.75rem}.random-guide-title{font-size:1.2rem}.random-guide-icon{font-size:2.5rem}.random-guide-buttons{gap:0.75rem}.random-guide-btn{padding:0.65rem 0.85rem;font-size:0.9rem}}.text-size-controls{align-items:center;display:flex;gap:0.5rem}.text-size-btn{background:0;border:1px solid var(--border);border-radius:var(--border-radius-sm);color:var(--text);cursor:pointer;font-size:0.9rem;font-weight:600;padding:4px 8px;transition:all var(--transition-normal);min-width:32px}.text-size-btn:hover:not(:disabled){border-color:var(--accent);color:var(--accent)}.text-size-btn:disabled{color:var(--muted);cursor:not-allowed;opacity:0.5}.text-size-display{color:var(--text);font-size:0.85rem;font-weight:600;min-width:24px;text-align:center}@media (max-width:1100px){:root{font-size:14px}}@media (max-width:768px){.text-size-controls{gap:0.25rem}.text-size-btn{padding:3px 6px;font-size:0.8rem;min-width:28px}}.collections-section{margin:0 0 var(--spacing-4xl) 0;padding:0 var(--spacing-2xl);max-width:var(--container-max-width);margin-left:auto;margin-right:auto}.collections-header{margin-bottom:var(--spacing-xl);padding-bottom:var(--spacing-md);border-bottom:2px solid rgba(212,165,116,0.3)}.collections-header h2{font-size:var(--font-size-heading);color:var(--accent);margin:0}.collections-empty{background:var(--surface);border:1px dashed var(--border);border-radius:var(--border-radius-md);padding:var(--spacing-3xl) var(--spacing-2xl);text-align:center;color:var(--muted)}.collections-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:var(--spacing-2xl)}.collection-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-md);padding:var(--spacing-lg);transition:all var(--transition-normal);cursor:pointer}.collection-card:hover{border-color:var(--accent);box-shadow:0 4px 16px rgba(212,165,116,0.15);transform:translateY(-2px)}.collection-header{display:flex;align-items:center;gap:var(--spacing-md);margin-bottom:var(--spacing-lg)}.collection-icon{font-size:2em;display:flex;align-items:center}.collection-name{font-size:var(--font-size-lg);color:var(--accent);margin:0;word-break:break-word}.collection-progress{margin-bottom:var(--spacing-lg)}.progress-bar{background:var(--border);border-radius:4px;height:8px;overflow:hidden;margin-bottom:var(--spacing-sm)}.progress-fill{background:linear-gradient(90deg,var(--accent),var(--accent2));height:100%;transition:width var(--transition-normal)}.progress-text{font-size:var(--font-size-sm);color:var(--muted);text-align:center}.collection-actions{display:flex;gap:var(--spacing-sm);justify-content:center}.view-collection-btn,.edit-collection-btn,.delete-collection-btn{background:rgba(212,165,116,0.1);border:1px solid var(--border);border-radius:var(--border-radius-sm);color:var(--text);cursor:pointer;font-size:var(--font-size-sm);padding:0.4rem 0.8rem;transition:all var(--transition-fast)}.view-collection-btn:hover,.edit-collection-btn:hover{background:var(--accent);border-color:var(--accent);color:#fff}.delete-collection-btn:hover{background:var(--color-danger);border-color:var(--color-danger);color:#fff}.collection-card.expanded{grid-column:1 / -1}.collection-guides{margin-top:var(--spacing-2xl);padding-top:var(--spacing-2xl);border-top:1px solid var(--border)}.collection-guides-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:var(--spacing-xl)}.collection-guide-item{font-size:0.9em}.add-to-collection-btn{position:absolute;top:var(--spacing-md);right:var(--spacing-md);background:transparent;border:none;font-size:1.2em;cursor:pointer;padding:var(--spacing-sm);border-radius:var(--border-radius-sm);transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center;z-index:10}.card:hover .add-to-collection-btn{background:rgba(212,165,116,0.2)}.add-to-collection-btn:hover{background:rgba(212,165,116,0.4);transform:scale(1.1)}.add-to-collection-btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}.collection-dropdown{position:fixed;background:var(--surface);border:1px solid var(--border);border-radius:var(--border-radius-md);box-shadow:var(--shadow-lg);z-index:1000;min-width:250px;max-width:400px;max-height:400px;overflow-y:auto}.collection-empty{padding:var(--spacing-lg);color:var(--muted);text-align:center;font-size:var(--font-size-sm)}.collection-item{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border);cursor:pointer;transition:background var(--transition-fast)}.collection-item:last-of-type{border-bottom:none}.collection-item:hover{background:rgba(212,165,116,0.1)}.collection-item input[type="checkbox"]{cursor:pointer;width:18px;height:18px}.collection-item label{flex:1;display:flex;align-items:center;gap:var(--spacing-sm);cursor:pointer;margin:0}.col-icon{font-size:1.2em}.col-name{flex:1;word-break:break-word}.col-count{font-size:var(--font-size-sm);color:var(--muted);white-space:nowrap}.collection-create-section{padding:var(--spacing-md);border-top:1px solid var(--border)}.create-collection-btn{width:100%;background:rgba(212,165,116,0.15);border:1px solid var(--border);border-radius:var(--border-radius-sm);color:var(--accent);cursor:pointer;font-size:var(--font-size-sm);padding:var(--spacing-md);transition:all var(--transition-fast)}.create-collection-btn:hover{background:var(--accent);border-color:var(--accent);color:#fff}@media (max-width:768px){.collections-grid{grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:var(--spacing-xl)}.collection-card{padding:var(--spacing-md)}.collection-icon{font-size:1.5em}.collection-name{font-size:var(--font-size-md)}.collection-guides-grid{grid-template-columns:1fr}.collection-dropdown{min-width:200px;max-width:300px}}.pwa-install-banner,.pwa-update-banner{animation:slideDown 0.3s ease-out;background:var(--surface);border-bottom:2px solid var(--accent);box-shadow:var(--shadow-sm);left:0;max-height:0;opacity:0;overflow:hidden;position:fixed;right:0;top:0;transition:opacity 0.3s ease,max-height 0.3s ease;z-index:9999}.pwa-install-banner.visible,.pwa-update-banner.visible{max-height:120px;opacity:1}.pwa-banner-content{align-items:center;display:flex;gap:1.5rem;max-width:var(--container-max-width);margin:0 auto;padding:1rem 2rem}.pwa-banner-icon{display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:2.5rem;width:56px;height:56px}.pwa-banner-icon img{border-radius:var(--border-radius-md);width:100%;height:100%;object-fit:cover}.pwa-banner-icon.update-icon{background:rgba(212,165,116,0.1);border-radius:var(--border-radius-md);font-size:1.8rem}.pwa-banner-info{flex:1;min-width:200px}.pwa-banner-title{color:var(--text);font-size:1rem;font-weight:700;margin:0 0 0.25rem}.pwa-banner-description{color:var(--muted);font-size:0.85rem;margin:0;line-height:1.4}.pwa-banner-actions{display:flex;gap:0.75rem;flex-shrink:0}.pwa-install-btn,.pwa-update-btn,.pwa-dismiss-btn{background:var(--accent);border:none;border-radius:var(--border-radius-sm);color:#fff;cursor:pointer;font-size:0.85rem;font-weight:600;padding:0.5rem 1rem;transition:all var(--transition-normal);white-space:nowrap}.pwa-install-btn:hover,.pwa-update-btn:hover{background:var(--accent2);transform:translateY(-2px)}.pwa-dismiss-btn{background:var(--card);border:1px solid var(--border);color:var(--text)}.pwa-dismiss-btn:hover{border-color:var(--accent);color:var(--accent)}.pwa-install-toast{animation:slideInUp 0.3s ease-out;background:var(--accent2);border-radius:var(--border-radius-md);bottom:2rem;box-shadow:var(--shadow-sm);color:#fff;font-size:0.9rem;font-weight:500;left:50%;max-width:320px;padding:1rem 1.5rem;position:fixed;text-align:center;transform:translateX(-50%) translateY(0);z-index:9998}.pwa-install-toast.hide{animation:slideOutRight 0.3s ease-out forwards}@media (max-width:768px){.pwa-banner-content{flex-direction:column;gap:1rem;padding:1rem}.pwa-install-banner,.pwa-update-banner{max-height:200px}.pwa-banner-icon{width:48px;height:48px}.pwa-banner-actions{width:100%;flex-direction:column}.pwa-install-btn,.pwa-update-btn,.pwa-dismiss-btn{flex:1}}@media (max-width:480px){.pwa-banner-description{display:none}.pwa-install-banner,.pwa-update-banner{max-height:100px}.pwa-banner-content{gap:0.75rem;padding:0.75rem}}.whats-new-section{background:linear-gradient(135deg,rgba(212,165,116,0.08) 0%,rgba(127,200,227,0.08) 100%);border:2px solid var(--accent);border-radius:var(--border-radius-xl);margin-bottom:2.5rem;overflow:hidden}.whats-new-header{align-items:center;background:rgba(212,165,116,0.1);border-bottom:1px solid var(--border);cursor:pointer;display:flex;justify-content:space-between;padding:1.25rem 1.5rem;transition:background 0.2s}.whats-new-header:hover{background:rgba(212,165,116,0.15)}.whats-new-title{align-items:center;display:flex;gap:0.75rem;font-size:1.1rem;font-weight:700;color:var(--accent)}.whats-new-icon{font-size:1.4rem;display:inline-block}.whats-new-count{background:var(--accent);color:var(--bg);border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:0.8rem;font-weight:700;min-width:24px;height:24px}.whats-new-toggle{background:none;border:none;color:var(--accent);cursor:pointer;font-size:0.85rem;padding:4px 8px;transition:transform 0.2s}.whats-new-toggle .toggle-icon{display:inline-block;transition:transform 0.2s}.whats-new-content{display:none;padding:0;max-height:0;overflow:hidden;transition:max-height 0.3s ease,padding 0.3s ease}.whats-new-content.expanded{display:block;max-height:500px;padding:1.5rem}.whats-new-toggle[aria-expanded="true"] .toggle-icon{transform:rotate(180deg)}.whats-new-category{margin-bottom:1.5rem}.whats-new-category:last-child{margin-bottom:0}.whats-new-category-title{align-items:center;color:var(--accent2);display:flex;font-size:1rem;font-weight:700;gap:0.5rem;margin-bottom:0.75rem}.category-icon{font-size:1.1rem;display:inline-block}.whats-new-list{display:flex;flex-direction:column;gap:0.5rem;list-style:none;margin:0;padding:0}.whats-new-item{align-items:center;background:rgba(212,165,116,0.05);border-left:3px solid var(--accent);color:var(--text);display:flex;gap:0.75rem;padding:0.75rem 1rem;border-radius:var(--border-radius-sm);transition:background 0.2s}.whats-new-item:hover{background:rgba(212,165,116,0.12)}.item-icon{font-size:1.2rem;display:inline-block}.item-title{flex:1;font-size:0.95rem}.item-badge{background:var(--accent);color:var(--bg);border-radius:20px;font-size:0.7rem;font-weight:700;letter-spacing:0.5px;padding:2px 8px;text-transform:uppercase;white-space:nowrap}.notification-badge{border-radius:4px;display:inline-block;font-size:0.65rem;font-weight:700;padding:3px 7px;position:absolute;text-transform:uppercase;letter-spacing:0.5px;top:12px;right:12px;z-index:3}.badge-updated{background:rgba(126,200,227,0.2);color:var(--color-winter);border:1px solid var(--color-winter)}.badge-new{background:rgba(255,107,107,0.2);color:var(--color-danger);border:1px solid var(--color-danger);animation:pulse 2s infinite}.card:hover .notification-badge{background:var(--accent);border-color:var(--accent);color:var(--bg)}.card:hover .badge-updated{background:var(--color-winter);border-color:var(--color-winter);color:var(--bg)}.card:hover .badge-new{background:var(--color-danger);border-color:var(--color-danger);color:#fff;animation:pulse 2s infinite}@media (max-width:768px){.whats-new-section{margin-bottom:2rem}.whats-new-header{padding:1rem 1.25rem}.whats-new-title{font-size:1rem}.whats-new-content.expanded{padding:1rem 1.25rem}.notification-badge{top:8px;right:8px;font-size:0.6rem;padding:2px 6px}.card{position:relative}}.debug-menu{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:10000;animation:fadeIn 0.2s ease-out}.debug-menu-content{background:var(--surface,#2d2416);border:2px solid var(--accent,#d4a574);border-radius:var(--border-radius-lg,10px);padding:var(--spacing-2xl,2rem);max-width:400px;box-shadow:var(--shadow-lg,0 10px 40px rgba(0,0,0,0.5));animation:slideUp 0.3s ease-out}.debug-menu-content h3{margin-top:0;margin-bottom:var(--spacing-xl,1.5rem);color:var(--accent,#d4a574);font-size:var(--font-size-2xl,1.1rem)}.debug-btn{display:block;width:100%;padding:var(--spacing-lg,1.25rem) var(--spacing-xl,1.5rem);margin-bottom:var(--spacing-md,1rem);background:var(--accent,#d4a574);color:var(--bg,#1a2e1a);border:none;border-radius:var(--border-radius-sm,6px);font-weight:bold;cursor:pointer;transition:all var(--transition-normal,0.2s);font-size:var(--font-size-md,0.85rem)}.debug-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm);opacity:0.9}.debug-btn:active{transform:translateY(0)}.debug-btn-secondary{background:var(--muted,#b8b8b8);color:var(--bg,#1a2e1a)}.error-viewer-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:10001;padding:var(--spacing-md,1rem);animation:fadeIn 0.2s ease-out}.error-viewer-content{background:var(--surface,#2d2416);border:2px solid var(--accent,#d4a574);border-radius:var(--border-radius-lg,10px);max-width:900px;max-height:80vh;width:100%;display:flex;flex-direction:column;box-shadow:var(--shadow-lg,0 10px 40px rgba(0,0,0,0.5));animation:slideUp 0.3s ease-out}.error-viewer-header{padding:var(--spacing-2xl,2rem);border-bottom:1px solid var(--border,#4a6d4a)}.error-viewer-header h2{margin:0 0 var(--spacing-sm,0.75rem) 0;color:var(--accent,#d4a574);font-size:var(--font-size-2xl,1.1rem)}.error-count{margin:0;color:var(--muted,#b8b8b8);font-size:var(--font-size-sm,0.75rem)}.error-viewer-errors{flex:1;overflow-y:auto;padding:var(--spacing-xl,1.5rem)}.error-entry{margin-bottom:var(--spacing-md,1rem);border:1px solid var(--border,#4a6d4a);border-radius:var(--border-radius-sm,6px);overflow:hidden}.error-summary{padding:var(--spacing-lg,1.25rem);background:rgba(212,165,116,0.05);cursor:pointer;display:flex;align-items:center;gap:var(--spacing-md,1rem);font-size:var(--font-size-md,0.85rem);transition:background var(--transition-normal,0.2s)}.error-summary:hover{background:rgba(212,165,116,0.1)}.error-index{color:var(--muted,#b8b8b8);min-width:40px}.error-type{color:var(--accent,#d4a574);font-weight:bold;min-width:140px}.error-message{flex:1;color:var(--text,#f5f0e8);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.error-time{color:var(--muted,#b8b8b8);font-size:var(--font-size-xs,0.7rem);min-width:80px;text-align:right}.error-details{padding:var(--spacing-lg,1.25rem);background:rgba(0,0,0,0.2);font-size:var(--font-size-sm,0.75rem)}.error-field{display:grid;grid-template-columns:80px 1fr;gap:var(--spacing-md,1rem);margin-bottom:var(--spacing-md,1rem);align-items:start}.error-field:last-child{margin-bottom:0}.error-label{color:var(--accent,#d4a574);font-weight:bold}.error-value{color:var(--text,#f5f0e8);word-break:break-word}.error-stack{margin:var(--spacing-md,1rem) 0 0 0;padding:var(--spacing-md,1rem);background:rgba(0,0,0,0.3);border-radius:var(--border-radius-sm,6px);overflow-x:auto;font-family:'Courier New',monospace;font-size:var(--font-size-xs,0.7rem);color:var(--color-danger);line-height:1.4;border:1px solid rgba(255,107,107,0.3)}.no-errors{text-align:center;padding:var(--spacing-2xl,2rem);color:var(--muted,#b8b8b8);font-style:italic}.error-viewer-actions{padding:var(--spacing-2xl,2rem);border-top:1px solid var(--border,#4a6d4a);display:flex;gap:var(--spacing-md,1rem);justify-content:flex-end}.error-btn{padding:var(--spacing-lg,1.25rem) var(--spacing-xl,1.5rem);border:none;border-radius:var(--border-radius-sm,6px);cursor:pointer;transition:all var(--transition-normal,0.2s);font-size:var(--font-size-md,0.85rem);font-weight:600}.error-btn-primary{background:var(--accent,#d4a574);color:var(--bg,#1a2e1a)}.error-btn-primary:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm);opacity:0.9}.error-btn-danger{background:var(--color-danger);color:white}.error-btn-danger:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(255,107,107,0.3);opacity:0.9}.error-btn-secondary{background:var(--muted,#b8b8b8);color:var(--bg,#1a2e1a)}.error-btn-secondary:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm);opacity:0.9}.error-btn:active{transform:translateY(0)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@media (max-width:768px){.error-viewer-modal{padding:var(--spacing-md,1rem)}.error-viewer-content{max-height:90vh}.error-viewer-header,.error-viewer-actions{padding:var(--spacing-lg,1.25rem)}.error-summary{flex-wrap:wrap;padding:var(--spacing-md,1rem)}.error-type{min-width:100px}.error-time{min-width:auto;width:100%;text-align:left;order:5}.error-field{grid-template-columns:70px 1fr;gap:var(--spacing-sm,0.75rem)}.error-btn{padding:var(--spacing-md,1rem) var(--spacing-lg,1.25rem);font-size:var(--font-size-sm,0.75rem)}}@media (prefers-reduced-motion:reduce){.debug-menu,.debug-menu-content,.error-viewer-modal,.error-viewer-content,.error-summary,.error-btn,.debug-btn{animation:none;transition:none}}