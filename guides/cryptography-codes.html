<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content='width=device-width, initial-scale=1.0' name="viewport"><title>Codes, Ciphers & Secure Communication</title><link rel="stylesheet" href="css/shared.css"><style>nav{max-width:1200px;margin:0 auto 3rem;background-color:var(--surface);padding:1rem;border-radius:8px;border-left:4px solid var(--accent)}nav ul{list-style:none;display:flex;flex-wrap:wrap;gap:1.5rem}.section h2{color:var(--accent2);font-size:1.8rem;margin-bottom:1rem;border-bottom:2px solid var(--accent);padding-bottom:.5rem}.section h3{color:var(--accent);font-size:1.3rem;margin-top:1.5rem;margin-bottom:.8rem}.section p{margin-bottom:1rem;color:var(--text)}.section ul,.section ol{margin-left:2rem;margin-bottom:1rem}.section li{margin-bottom:.5rem}.example{background-color:rgba(83,216,168,0.1);border-left:4px solid var(--accent2);padding:1rem;margin:1rem 0;font-family:'Courier New',monospace;border-radius:4px}.cipher-table{width:100%;border-collapse:collapse;margin:1.5rem 0;background-color:var(--card);font-size:.9rem}.cipher-table th{background-color:var(--accent);color:var(--bg);padding:.75rem;text-align:center;font-weight:bold}.cipher-table td{border:1px solid var(--border);padding:.5rem;text-align:center}.cipher-table tr:nth-child(even){background-color:rgba(83,216,168,0.05)}.vigeinere-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:2rem;margin:2rem 0}.vigenere-table{font-size:.75rem;overflow-x:auto}.svg-container{display:flex;justify-content:center;margin:2rem 0;background-color:var(--card);padding:2rem;border-radius:8px;border:1px solid var(--border)}.highlight{background-color:rgba(233,69,96,0.2);padding:.2rem .4rem;border-radius:3px;color:var(--accent2)}</style></head><body><main role="main"><a class="skip-link" href="#main-content"> Skip to main content </a><div class="container"><header><h1> Codes, Ciphers & Secure Communication </h1><div class="top-controls"><button class="theme-toggle" aria-label='Toggle dark/light theme' id="theme-toggle" title='Toggle dark/light mode'> ‚òÄÔ∏è </button><button class="mark-read-btn" aria-label='Mark this guide as read' id="mark-read-btn" title='Mark this guide as completed'> Mark as Read </button></div><div class="guide-metadata"><span class="difficulty"> Difficulty: ‚óè‚óè‚óè‚óã‚óã </span><span class="read-time"> üìñ ~17 min read </span></div><p> Understanding the methods, history, and practical application of secret communication </p></header><nav role="navigation" aria-label="Breadcrumb"><ul><li><a href="#why-codes"> Why Codes </a></li><li><a href="#caesar"> Caesar Cipher </a></li><li><a href="#substitution"> Substitution </a></li><li><a href="#vigenere"> Vigen√®re </a></li><li><a href="#transposition"> Transposition </a></li><li><a href="#otp"> One-Time Pad </a></li><li><a href="#book"> Book Cipher </a></li><li><a href="#steganography"> Steganography </a></li><li><a href="#codebooks"> Code Books </a></li><li><a href="#practical"> Practical Use </a></li></ul></nav><div class="section" id="why-codes"><h2> 1. Why Codes Matter: The Need for Secure Communication </h2><p> Throughout history, the ability to communicate secretly has been essential to human civilization. Codes and ciphers protect information in four primary contexts: </p><div class="card"><h4> Military Operations </h4><p> Commands must be transmitted without enemy interception. Battle plans, troop movements, supply lines, and strategic objectives require absolute confidentiality. During wartime, a single intercepted message can mean the difference between victory and defeat. </p></div><div class="card"><h4> Trade Secrets & Commerce </h4><p> Merchants protecting recipes, manufacturing processes, pricing strategies, and business dealings from competitors. A business formula or supplier list, if exposed, could devastate competitive advantage. Trade secrets have protected value only through confidentiality. </p></div><div class="card"><h4> Personal Privacy </h4><p> Individuals have legitimate reasons to keep personal matters private: medical information, financial details, family communications, and personal thoughts. Privacy is a fundamental human right independent of having "something to hide." </p></div><div class="card"><h4> Diplomatic Communication </h4><p> Governments must communicate confidentially with ambassadors, negotiate treaties in secret, and protect intelligence operations. Exposed diplomatic cables can destabilize international relations and endanger operatives in hostile territory. </p></div><p style='margin-top: 1.5rem;'> The history of cryptography is the history of civilization itself‚Äîfrom the moment humans first needed to hide information from others, codes and ciphers became essential tools. </p></div><div class="section" id="caesar"><h2> 2. Caesar Cipher: The Simplest Method </h2><p> The Caesar Cipher is the most basic encryption method, named after Julius Caesar who used it in his military correspondence. It works by <span class="highlight"> shifting each letter in the alphabet by a fixed number of positions </span> . </p><h3> How It Works </h3><p> Select a shift value (N), then replace each letter by the letter N positions further in the alphabet: </p><div class="example"> Plaintext: ATTACK AT DAWN Shift: 3 Ciphertext: DWWDFN DW GDZQ A ‚Üí D (shift 3) T ‚Üí W (shift 3) T ‚Üí W (shift 3) A ‚Üí D (shift 3) C ‚Üí F (shift 3) K ‚Üí N (shift 3) </div><h3> Why It's Weak </h3><p> The Caesar Cipher has exactly <span class="highlight"> 26 possible shift values </span> (0-25). An attacker can try all possibilities in minutes. This method offers no real security in modern times, but understanding it is crucial for learning cryptography fundamentals. </p><h3> Caesar Cipher Shift Table </h3><table class="cipher-table"><tr><th scope="row"> Original </th><th scope="row"> A </th><th scope="row"> B </th><th scope="row"> C </th><th scope="row"> D </th><th scope="row"> E </th><th scope="row"> F </th><th scope="row"> G </th><th scope="row"> H </th><th scope="row"> I </th><th scope="row"> J </th></tr><tr><td><strong> Shift +3 </strong></td><td> D </td><td> E </td><td> F </td><td> G </td><td> H </td><td> I </td><td> J </td><td> K </td><td> L </td><td> M </td></tr><tr><td><strong> Shift +5 </strong></td><td> F </td><td> G </td><td> H </td><td> I </td><td> J </td><td> K </td><td> L </td><td> M </td><td> N </td><td> O </td></tr><tr><td><strong> Shift +13 </strong></td><td> N </td><td> O </td><td> P </td><td> Q </td><td> R </td><td> S </td><td> T </td><td> U </td><td> V </td><td> W </td></tr></table><h3> Decryption </h3><p> To decrypt a Caesar Cipher, simply shift backwards by the same amount. If you don't know the shift value, try all 26 possibilities‚Äîit takes only minutes by hand, seconds by computer. </p><p><strong> Modern Use: </strong> Caesar Cipher appears as ROT13, a variant used for casual obfuscation online (rot13.com can instantly reverse it). It demonstrates substitution principles but provides zero actual security. </p></div><div class="section" id="substitution"><h2> 3. Substitution Ciphers: Random Letter Swaps </h2><p> A substitution cipher replaces each letter of the alphabet with a different letter, according to a secret key. Unlike Caesar Cipher (which shifts by a fixed amount), substitution ciphers can use any arbitrary mapping. </p><h3> How It Works </h3><p> Create a random substitution alphabet: </p><div class="example"> Original: A B C D E F G H I J K L M N O P Q R S T U V W X Y Z Substitution: Q W E R T Y U I O P A S D F G H J K L Z X C V B N M Plaintext: HELLO Ciphertext: ITSSG </div><h3> Why It Seems Stronger </h3><p> There are 26! (factorial) possible substitution keys‚Äîapproximately 403 septillion combinations. Brute force would take longer than the age of the universe with traditional computers. This seemed unbreakable for centuries. </p><h3> The Fatal Weakness: Frequency Analysis </h3><p> Substitution ciphers fail because <span class="highlight"> letter frequency patterns remain unchanged </span> . In English: </p><ul><li><strong> E </strong> is the most common letter (~12% of text) </li><li><strong> T, A, O, I, N </strong> appear frequently </li><li><strong> Z, Q, X, J </strong> are rare </li></ul><p> An attacker simply: </p><ol><li> Count frequency of each cipher letter in the encrypted text </li><li> Match high-frequency cipher letters to high-frequency plain letters (E, T, A, etc.) </li><li> Look for recognizable words and patterns </li><li> Progressively decode the entire message </li></ol><div class="card"><h4> Frequency Analysis Attack Example </h4><p> If the ciphertext has mostly the letter "K," it likely represents "E" (most common). If "P" and "Q" frequently appear together, they might be "T" and "H." With careful analysis of digraphs (two-letter combinations) and trigraphs, the entire cipher breaks within hours. </p></div><h3> Countermeasures (Insufficient) </h3><p> Attempts to defeat frequency analysis include removing vowels, adding null characters, or using polyalphabetic methods. Substitution ciphers with multiple alphabets lead directly to the next evolution: the Vigen√®re Cipher. </p></div><div class="section" id="vigenere"><h2> 4. Vigen√®re Cipher: Polyalphabetic Strength </h2><p> The Vigen√®re Cipher, invented by Blaise de Vigen√®re in 1553, uses <span class="highlight"> multiple substitution alphabets </span> to encrypt messages. It remained unbroken for 300 years and represented a major advance in cryptography. </p><h3> The Key Concept </h3><p> Instead of a single shift value, use a keyword. Each letter of the keyword determines the shift for the corresponding letter of the plaintext: </p><div class="example"> Plaintext: ATTACKATDAWN Key: SECRETSECRET Ciphertext: SFIAFXQSWSGD Explanation: A + S(shift 18) = S T + E(shift 4) = X (shifts by letter position: A=0, B=1... S=18) T + C(shift 2) = V A + R(shift 17) = R C + E(shift 4) = G K + T(shift 19) = D A + S(shift 18) = S T + E(shift 4) = X D + C(shift 2) = F A + R(shift 17) = R W + E(shift 4) = A N + T(shift 19) = G </div><h3> The Vigen√®re Table (Tabula Recta) </h3><p> The encryption table below allows easy lookup of cipher letters. Find the plaintext letter in the left column, move across to the column matching the key letter, and read the cipher letter: </p><div class="svg-container"><svg viewbox='0 0 1000 800' xmlns="http://www.w3.org/2000/svg" aria-label='Codes, Ciphers & Secure Communication diagram 1'><text fill="#53d8a8" font-size="28" font-weight="bold" text-anchor="middle" x="500" y="40"> Vigen√®re Table (Tabula Recta) </text><text fill="#aaa" font-size="12" x="50" y="80"> Key ‚Üí </text><g id="column-headers"><text fill="#e94560" font-size="11" text-anchor="middle" x="80" y="80"> A </text><text fill="#e94560" font-size="11" text-anchor="middle" x="100" y="80"> B </text><text fill="#e94560" font-size="11" text-anchor="middle" x="120" y="80"> C </text><text fill="#e94560" font-size="11" text-anchor="middle" x="140" y="80"> D </text><text fill="#e94560" font-size="11" text-anchor="middle" x="160" y="80"> E </text><text fill="#e94560" font-size="11" text-anchor="middle" x="180" y="80"> F </text><text fill="#e94560" font-size="11" text-anchor="middle" x="200" y="80"> G </text><text fill="#e94560" font-size="11" text-anchor="middle" x="220" y="80"> H </text><text fill="#e94560" font-size="11" text-anchor="middle" x="240" y="80"> I </text><text fill="#e94560" font-size="11" text-anchor="middle" x="260" y="80"> J </text></g><g id="row-labels"><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="100"> A </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="120"> B </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="140"> C </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="160"> D </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="180"> E </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="200"> F </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="220"> G </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="240"> H </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="260"> I </text><text fill="#53d8a8" font-size="11" text-anchor="middle" x="70" y="280"> J </text></g><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="100"> A </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="100"> B </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="100"> C </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="100"> D </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="100"> E </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="100"> F </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="100"> G </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="100"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="100"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="100"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="120"> B </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="120"> C </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="120"> D </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="120"> E </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="120"> F </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="120"> G </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="120"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="120"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="120"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="120"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="140"> C </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="140"> D </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="140"> E </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="140"> F </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="140"> G </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="140"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="140"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="140"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="140"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="140"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="160"> D </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="160"> E </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="160"> F </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="160"> G </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="160"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="160"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="160"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="160"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="160"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="160"> M </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="180"> E </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="180"> F </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="180"> G </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="180"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="180"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="180"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="180"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="180"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="180"> M </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="180"> N </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="200"> F </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="200"> G </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="200"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="200"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="200"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="200"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="200"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="200"> M </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="200"> N </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="200"> O </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="220"> G </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="220"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="220"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="220"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="220"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="220"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="220"> M </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="220"> N </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="220"> O </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="220"> P </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="240"> H </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="240"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="240"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="240"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="240"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="240"> M </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="240"> N </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="240"> O </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="240"> P </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="240"> Q </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="260"> I </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="260"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="260"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="260"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="260"> M </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="260"> N </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="260"> O </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="260"> P </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="260"> Q </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="260"> R </text><text fill="#eee" font-size="10" text-anchor="middle" x="80" y="280"> J </text><text fill="#eee" font-size="10" text-anchor="middle" x="100" y="280"> K </text><text fill="#eee" font-size="10" text-anchor="middle" x="120" y="280"> L </text><text fill="#eee" font-size="10" text-anchor="middle" x="140" y="280"> M </text><text fill="#eee" font-size="10" text-anchor="middle" x="160" y="280"> N </text><text fill="#eee" font-size="10" text-anchor="middle" x="180" y="280"> O </text><text fill="#eee" font-size="10" text-anchor="middle" x="200" y="280"> P </text><text fill="#eee" font-size="10" text-anchor="middle" x="220" y="280"> Q </text><text fill="#eee" font-size="10" text-anchor="middle" x="240" y="280"> R </text><text fill="#eee" font-size="10" text-anchor="middle" x="260" y="280"> S </text><line stroke="#2a2a4a" stroke-width="1" x1="75" x2="265" y1="90" y2="90"></line><line stroke="#2a2a4a" stroke-width="1" x1="75" x2="265" y1="290" y2="290"></line><line stroke="#2a2a4a" stroke-width="1" x1="75" x2="75" y1="90" y2="290"></line><line stroke="#2a2a4a" stroke-width="1" x1="265" x2="265" y1="90" y2="290"></line><text fill="#53d8a8" font-size="14" x="500" y="350"><tspan dy="0" x="500"> To encrypt: Find plaintext letter in left row, </tspan><tspan dy="20" x="500"> follow across to key letter column, read cipher letter. </tspan></text><text fill="#e94560" font-size="13" x="500" y="400"><tspan dy="0" x="500"> Example: Plaintext 'A' + Key 'S' ‚Üí Ciphertext 'S' </tspan><tspan dy="18" x="500"> (Find A row, follow to S column = S) </tspan></text><text fill="#aaa" font-size="12" x="500" y="470"><tspan dy="0" x="500"> The Vigen√®re Cipher was considered unbreakable for 300 years </tspan><tspan dy="16" x="500"> because the repeating key masks frequency patterns of single letters. </tspan></text></svg></div><h3> Why It's Much Stronger Than Substitution </h3><p> The same plaintext letter encrypts to different ciphertext letters depending on the key position. "E" might become "S" once, "X" another time, "Q" a third time. This destroys frequency analysis‚Äîattackers can't simply match cipher letters to plain letters. </p><div class="card"><h4> Breaking Vigen√®re: The Kasiski Examination </h4><p> In 1863, Friedrich Kasiski proved Vigen√®re ciphers could be broken by finding repeated sequences in the ciphertext, determining key length, then applying frequency analysis to each Caesar Cipher layer. Modern computers can crack weak Vigen√®re in seconds. </p></div><h3> Key Management </h3><p> The strength depends on key length and randomness. A short key like "SECRET" (6 letters) repeats and weakens. A truly random key of 100+ letters becomes far more resistant to cryptanalysis. Long, random keys are impractical to memorize, leading to the next evolution. </p></div><div class="section" id="transposition"><h2> 5. Transposition Ciphers: Rearranging Letters </h2><p> Instead of substituting letters, transposition ciphers <span class="highlight"> rearrange the order of letters </span> . The plaintext contains all original letters, just in a scrambled sequence. Frequency analysis fails because letter frequencies remain identical to plaintext. </p><h3> Rail Fence Cipher (Zig-Zag Cipher) </h3><p> Write the message in a zigzag pattern across multiple "rails," then read off row by row: </p><div class="example"> Message: ATTACKATDAWN Rail 1: A A A Rail 2: T T C T D W Rail 3: A A N Encrypted: AAACDWTTCWATDAWN Read rails top to bottom </div><h3> Columnar Transposition </h3><p> Write plaintext in rows under a keyword, then read columns in the order the keyword letters would alphabetize: </p><div class="example"> Keyword: SECRET Position: 3 2 4 1 5 6 S E C R E T 3 2 4 1 5 6 ----------- H E L L O W O R L D X Y Read columns in order: 1,2,3,4,5,6 Column 1: L,Y Column 2: E,R Column 3: H,O Column 4: L,D Column 5: O,X Column 6: W,Y Ciphertext: LYERHOHLDOXWY </div><h3> Combining Transposition With Substitution </h3><p> A single transposition is weak‚Äîthe ciphertext is just scrambled plaintext. Combining transposition with substitution (encrypt first, then scramble) greatly increases strength. Military systems used multiple rounds of both operations. </p><h3> Vulnerability </h3><p> Transposition alone preserves letter frequency, so repeated keys or short messages are vulnerable to pattern analysis. However, transposition is useful when combined with substitution methods as a second layer of obfuscation. </p></div><div class="section" id="otp"><h2> 6. One-Time Pad: The Unbreakable Cipher </h2><p> The One-Time Pad is the only encryption method with proven mathematical unbreakability. It requires perfect randomness, careful key management, and absolute discipline in use. </p><h3> The Four Unbreakable Conditions </h3><div class="card"><h4> 1. Truly Random Key </h4><p> The key must be genuinely random, with no patterns, biases, or predictable sequences. Even slight non-randomness can leave cryptanalytic footprints. Pseudo-random number generators are insufficient‚Äîonly physical randomness works. </p></div><div class="card"><h4> 2. Key Length Equals Message Length </h4><p> The key must be at least as long as the plaintext message. If the key is shorter than the message, it must be repeated‚Äîwhich introduces patterns that cryptanalysts can exploit. </p></div><div class="card"><h4> 3. Use Each Key Exactly Once </h4><p> Once a key has been used to encrypt one message, it must never be used again. Ever. Reusing any portion of a one-time pad‚Äîeven once‚Äîallows attackers to break it. This is why it's called "one-time." </p></div><div class="card"><h4> 4. Keep Keys Absolutely Secret </h4><p> Both sender and receiver must possess the identical key, and it must remain secret from all others. If an adversary obtains the key, the encryption is instantly broken. Keys must be physically secured, not stored digitally on networked devices. </p></div><h3> How It Works: Mathematical Basis </h3><div class="example"> Plaintext: H E L L O ASCII: 72 69 76 76 79 Key (random): 42 91 55 38 23 XOR result: 110 122 99 114 84 Ciphertext: n z c r T Each character: Plaintext XOR Key = Ciphertext Decryption: Ciphertext XOR Key = Plaintext </div><h3> Generating Truly Random Keys </h3><p> True randomness requires physical processes, not algorithms. Methods include: </p><ul><li><strong> Dice Rolling: </strong> Roll a die multiple times, recording results (1-6). Groups of three rolls = 000-215 map to alphabet + numbers. </li><li><strong> Shuffled Cards: </strong> Shuffle a full deck thoroughly, assign each card a value, record the sequence. Physical shuffling provides strong randomness. </li><li><strong> Nuclear Decay: </strong> Radioactive decay timings are genuinely random. Specialized hardware exists for this (expensive). </li><li><strong> Atmospheric Noise: </strong> Radio static and atmospheric noise contain random elements suitable for key generation. </li><li><strong> Photonic Methods: </strong> Random photon generation via lasers provides reliable quantum randomness. </li></ul><h3> The Key Distribution Problem </h3><p> One-Time Pad's greatest weakness isn't the encryption‚Äîit's getting the key to the recipient. Both parties must have identical keys before any message is encrypted. This requires: </p><ul><li> Face-to-face meetings where keys are exchanged </li><li> Trusted couriers delivering physical key material </li><li> Pre-arranged meetings at specified times and places </li><li> Heavily secured storage of keys until needed </li></ul><p> Modern armies and intelligence agencies still use One-Time Pads for the most sensitive communications precisely because of their unbreakability. The cost and logistics of key distribution are worth the security guarantee. </p><h3> Historic Use </h3><p> The Soviet Union used One-Time Pads for decades. The famous "Dead Hand" (Perimeter) system‚Äînuclear retaliation dead-man's switch‚Äîuses one-time pads to ensure no signal can be forged. The KGB encrypted every diplomatic cable using one-time pads. </p></div><div class="section" id="book"><h2> 7. Book Cipher: Using Shared References </h2><p> A book cipher uses a mutually known text (book, poem, document) as the key. Both parties must possess identical copies of the same book‚Äîletter-for-letter identical, including punctuation and page breaks. </p><h3> How It Works </h3><p> Messages are encoded as page-line-word (or page-line-word-letter) references. The recipient uses the same book to decode: </p><div class="example"> Shared Book: Pride and Prejudice (specific edition) Message to send: "ATTACK" Lookup in book: Page 23, Line 5, Word 3, Letter 1 = A Page 45, Line 12, Word 7, Letter 2 = T Page 67, Line 3, Word 1, Letter 1 = T Page 12, Line 8, Word 4, Letter 3 = A Page 89, Line 1, Word 2, Letter 2 = C Page 34, Line 11, Word 6, Letter 1 = K Encrypted: 23-5-3-1, 45-12-7-2, 67-3-1-1, 12-8-4-3, 89-1-2-2, 34-11-6-1 Recipient looks up same references in identical book copy, finds same letters. </div><h3> Advantages </h3><ul><li> The "key" (book) is innocent‚Äînothing suspicious about owning common books </li><li> Large dictionaries provide many options for each letter </li><li> Multiple valid encodings exist for the same message (different pages) </li><li> If intercepted, messages appear to be random number sequences </li></ul><h3> Disadvantages </h3><ul><li><strong> Edition Matters: </strong> Different editions of the same book have different page breaks. A single edition difference breaks decryption. </li><li><strong> Frequency Limitations: </strong> Some letters (X, Z, Q) appear rarely in most books, making those messages difficult to encode. </li><li><strong> Known Key Vulnerabilities: </strong> If an interceptor suspects the book used, they can attempt decryption with multiple editions. </li><li><strong> Logistics: </strong> Both parties must have identical physical books. In wartime or long separations, this becomes impractical. </li></ul><h3> Historic Examples </h3><p> The Rosenberg spy ring used book ciphers during the Cold War. German spies in WWII used specific book editions as keys. Modern variations still exist in espionage communities. </p><h3> Modern Variant: Digital Books </h3><p> Modern book ciphers sometimes use digital texts (publicly available PDFs, e-books) since perfect reproduction is guaranteed. However, the advantage of the "innocent appearance" of a physical book is lost. </p></div><div class="section" id="steganography"><h2> 8. Steganography: Hiding the Message Itself </h2><p> While cryptography scrambles messages into unreadable form, steganography <span class="highlight"> hides the existence of the message entirely </span> . An interceptor sees no message at all‚Äîit's invisible. </p><h3> Invisible Ink Methods </h3><div class="card"><h4> Lemon Juice and Milk </h4><p> These organic compounds oxidize to brown when heated. Write a message with a feather quill dipped in lemon juice on regular parchment. The message is invisible until the recipient holds the paper near a heat source (candle flame, oven). The text appears in brown ink temporarily. </p></div><div class="card"><h4> Sympathetic Inks </h4><p> Various chemical solutions (urine, milk, starch solutions mixed with weak iodine) become visible when treated with complementary chemicals or heat. Some require specific chemical reactions to reveal. </p></div><div class="card"><h4> Microdots </h4><p> A microdot is a photograph reduced to the size of a period (.) on a typed letter. An entire page of text fits into a single dot no larger than the period at the end of a sentence. Only a microscope reveals the message. Microdots were used extensively by Cold War spies. </p></div><h3> Hidden Text in Plain Sight </h3><div class="card"><h4> Acrostic Messages </h4><p> The first letter of each word or line spells a hidden message: </p><div class="example"> Innocent letter: "People expect real action. Never assume enemies. Surrender immediately or face annihilation. Soldiers erupt violently everywhere. Support every effort. Reinforce immediately. Fortify everything. Now." Hidden message: Read first letters of first word in each line: P-N-S-S-S-R-F-N = "PNSSRFN" Actually: More sophisticated: "SEND REINFORCEMENTS" </div></div><div class="card"><h4> Null Cipher </h4><p> A message is hidden within innocent text by prearranged rules. For example, every 5th word contains one letter of the hidden message, or letters in positions 1, 3, 5 of each word spell the secret. </p><div class="example"> Innocent: "The weather is beautiful today, and the sun shines brightly over the garden." Rule: Every 5th word's first letter contains hidden message. Word 5: beautiful (B) Word 10: shines (S) Word 15: (none - only 13 words) Multiple passes with different rules can hide longer messages in longer innocent texts. </div></div><h3> Combination: Steganography + Cryptography </h3><p> The most secure approach combines both: hide an encrypted message inside innocent-looking text or images. An interceptor must first discover the hidden message exists, then overcome the encryption. Single-layer defense is better than none. </p><h3> Modern Digital Steganography </h3><p> Digital images can hide data in the least significant bits of pixel values‚Äîhumans can't see the difference, but computers can extract the hidden message. Similar techniques work with audio (hiding in frequency ranges humans don't hear) and video (frame-by-frame variations). </p></div><div class="section" id="codebooks"><h2> 9. Code Books: Pre-Arranged Phrases and Symbols </h2><p> A code book is a shared reference where entire phrases, concepts, or ideas are replaced with short codes (numbers, short words, or symbols). Unlike ciphers that encrypt letter-by-letter, codes work at the semantic level. </p><h3> How Code Books Work </h3><div class="example"> Code Book Entry: Code 1847: "Send reinforcements immediately" Code 2934: "Retreat to secondary position" Code 4156: "Enemy attack detected" Code 5029: "All troops secure" Code 7823: "Grandmother is sick" (could mean "send reinforcements") Message: "Attack in dawn" Code: 4156 DAWN Recipient consults code book, translates instantly. No encryption needed‚Äîjust substitution of meaningful units. </div><h3> Building a Community Code Book </h3><p> A useful code book for a community or organization requires: </p><ul><li><strong> Comprehensive Coverage: </strong> Include all common communications needed: weather alerts, supply requests, medical emergencies, security warnings, all-clear signals. </li><li><strong> Brevity: </strong> Short codes are faster to transmit. Using three-digit numbers (000-999) provides 1000 possible codes‚Äîsufficient for most communities. </li><li><strong> Randomization: </strong> Don't assign 0001 = "All clear" where patterns are obvious. Shuffle assignments randomly. </li><li><strong> Redundancy: </strong> Include multiple codes for critical concepts so a single intercepted message doesn't reveal the code book's structure. </li><li><strong> Agreed Updates: </strong> Periodically change the code book to prevent adversaries from learning it through observation. </li><li><strong> Physical Security: </strong> Code books must be kept secure. Ideally, memorized for critical codes; written copies kept in locked containers. </li></ul><h3> Historical Military Codes </h3><p> Before WWII, military forces used extensive code books. The Japanese PURPLE cipher machine combined code books with mechanical encryption. German naval Enigma relied on code books for initial setup. Breaking these required capturing actual code books. </p><h3> Advantages Over Pure Cipher </h3><ul><li> Faster encoding and decoding‚Äîno complex calculations </li><li> Less prone to human error‚Äîtrained operators memorize codes </li><li> Semantic security‚Äîhostile listeners can't understand meaning even if they intercept messages </li><li> Efficiency‚Äîshorter codes transmit faster than encrypted plaintext </li></ul><h3> Disadvantages </h3><ul><li> Code books must be physically distributed and protected </li><li> If a code book is captured, all communications become transparent </li><li> Adding new phrases requires updating all code books in the field </li><li> Limited to pre-planned communications‚Äîspontaneous messages require extensive codification </li></ul></div><div class="section" id="practical"><h2> 10. Practical Use: When to Use Each Method </h2><p> Different cryptographic methods serve different purposes. Choosing the right tool depends on threat level, available resources, speed requirements, and risk tolerance. </p><h3> Caesar Cipher </h3><p><strong> When: </strong> Educational purposes only. Useful for teaching encryption concepts but offers no real security. </p><p><strong> Use Case: </strong> Fun puzzles, children's secret messages, demonstrating substitution principles. </p><p><strong> Never: </strong> For any information requiring actual security. </p><h3> Substitution Cipher </h3><p><strong> When: </strong> Protection against casual observers only. Any motivated cryptanalyst breaks it in hours. </p><p><strong> Use Case: </strong> Personal journals assuming no serious adversary, hiding information from family members or acquaintances. </p><p><strong> Never: </strong> For military, diplomatic, or financially sensitive information. </p><h3> Vigen√®re Cipher </h3><p><strong> When: </strong> Protection against unsophisticated eavesdroppers. Provides moderate security if key is long and random. </p><p><strong> Use Case: </strong> Pre-computer era (1500s-1900s) military communications. Today: historical education, demonstration of polyalphabetic principles. </p><p><strong> Modern Challenge: </strong> Computers crack Vigen√®re in seconds if key length is known. </p><h3> Transposition Cipher </h3><p><strong> When: </strong> As a second layer in multi-stage encryption. Rarely used alone. </p><p><strong> Use Case: </strong> Combine with substitution for stronger encryption. Military systems used multiple rounds of transposition and substitution. </p><h3> One-Time Pad </h3><p><strong> When: </strong> For absolutely critical, highly sensitive information when perfect security is mandatory. </p><p><strong> Use Case: </strong> Intelligence agency communications, military command authority, secure diplomatic channels, financial transactions of extreme importance. </p><p><strong> Cost Justification: </strong> The expense and logistics of key distribution are worthwhile when information value is extremely high. </p><p><strong> Modern Use: </strong> Intelligence agencies still use One-Time Pads for the most sensitive communications. Not obsolete. </p><h3> Book Cipher </h3><p><strong> When: </strong> Covert operations where both parties can meet to exchange identical books. Low technical requirements. </p><p><strong> Use Case: </strong> Cold War espionage (proven), modern field operations where technical encryption isn't available, isolated communities without electricity. </p><p><strong> Risk: </strong> If the book choice is discovered, all security is lost. </p><h3> Steganography </h3><p><strong> When: </strong> When message existence itself must be hidden, not just the content. </p><p><strong> Use Case: </strong> Covert agent communication (message hidden in innocent photo), political dissidents hiding messages in public postings, whistleblowers embedding secrets in large documents. </p><p><strong> Combine With: </strong> Encryption for defense-in-depth‚Äîhidden + encrypted is stronger than either alone. </p><h3> Code Books </h3><p><strong> When: </strong> Organizations with standardized, repetitive communications (military, emergency services, isolated communities). </p><p><strong> Use Case: </strong> Emergency signal systems, military radio protocols, community warning networks, business secure communications. </p><p><strong> Requirements: </strong> All parties must have identical, current code books and training. </p><h3> The Key Distribution Problem </h3><p> Every encryption method faces the central challenge: how do sender and receiver share the key without an adversary intercepting it? This is unsolved in classical cryptography: </p><ul><li><strong> Caesar/Substitution Cipher: </strong> Key can be communicated verbally, small enough to memorize. </li><li><strong> Vigen√®re Cipher: </strong> Key requires memorization (long keywords) or secure physical delivery (written keys). </li><li><strong> One-Time Pad: </strong> Requires face-to-face meeting or trusted courier. No digital transmission of pads is safe. </li><li><strong> Book Cipher: </strong> Book can be publicly owned (no suspicion), but specific edition must be agreed upon beforehand. </li><li><strong> Code Books: </strong> Physical distribution to all parties, kept secure, updated periodically. </li></ul><h3> Courier Security </h3><p> Physical delivery of encryption keys (code books, one-time pad pages, agreed books) requires careful courier procedures: </p><ul><li><strong> Selection: </strong> Choose trustworthy couriers without obvious connections to either party. </li><li><strong> Route Variation: </strong> Never use the same courier or route twice. Patterns reveal vulnerabilities. </li><li><strong> Verification: </strong> Use passwords or recognition signals to verify courier identity before key handoff. </li><li><strong> Dead Drops: </strong> Leave materials at prearranged locations rather than face-to-face meetings to minimize exposure. </li><li><strong> Deniability: </strong> Couriers should have plausible explanations for their presence in the area. </li><li><strong> Redundancy: </strong> Send critical keys via multiple couriers and routes to ensure at least one reaches safely. </li></ul><h3> Decision Framework </h3><p> Choose your method by answering these questions: </p><ol><li><strong> How sensitive is the information? </strong> Financial/military data needs strong methods. Personal letters to family need less. </li><li><strong> How sophisticated is the expected adversary? </strong> Nation-state intelligence agencies require the strongest methods (One-Time Pad). Casual eavesdroppers are deterred by simple substitution. </li><li><strong> How much time can encryption/decryption take? </strong> Real-time military communication needs fast methods. Spy agencies can use slow, complex procedures. </li><li><strong> What resources are available? </strong> Code books and book ciphers require no technology. One-Time Pads require careful randomization and secure distribution. </li><li><strong> Can sender and receiver meet beforehand? </strong> If yes: one-time pad, book cipher, code books. If no: need method for covert key delivery. </li><li><strong> Must message existence be hidden? </strong> If yes: steganography. If only content needs hiding: cipher alone is sufficient. </li></ol><h3> Modern Reality </h3><p> Classical cryptography survives in modern world because: </p><ul><li> Digital systems fail; classical methods work without electricity </li><li> Intelligence agencies trust proven historical methods </li><li> Some information is so sensitive that air-gapped (non-networked) communication using classical methods provides confidence </li><li> Teaching cryptography requires understanding foundations‚Äîancient methods teach principles </li><li> Remote/isolated communities may lack digital infrastructure but need secure communication </li></ul></div><div class="section"><div class="related-guides"><h4> Related Guides in This Compendium </h4><ul><li><a href="signals-communication.html"> Signals & Communication: Morse code, semaphore, radio protocols, secure message transmission methods </a></li><li><a href="archival-records.html"> Archival Records: Document preservation, watermarking, authenticity verification </a></li><li><a href="governance.html"> Governance & Organization: Establishing trust networks, courier systems, institutional security </a></li></ul></div></div></div><div class="common-mistakes"><h3> Common Mistakes </h3><ul><li> Add specific common mistakes here based on the guide content </li></ul></div><button id="back-to-top" title='Back to top'> ‚Üë </button><script>
 (function() {
 // Initialize theme from localStorage
 const savedTheme = localStorage.getItem('compendium-theme') || 'dark';
 document.documentElement.setAttribute('data-theme', savedTheme);
 // Theme toggle
 const themeToggle = document.getElementById('theme-toggle');
 if(themeToggle) {
 themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
 themeToggle.addEventListener('click', function() {
 const current = document.documentElement.getAttribute('data-theme');
 const next = current === 'dark' ? 'light' : 'dark';
 document.documentElement.setAttribute('data-theme', next);
 localStorage.setItem('compendium-theme', next);
 themeToggle.textContent = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
 });
 }
 // Progress tracking
 const guideId = location.pathname.split('/').pop().replace('.html', '');
 const progress = JSON.parse(localStorage.getItem('compendium-progress') || '{}');
 const markBtn = document.getElementById('mark-read-btn');
 if(markBtn) {
 if(progress[guideId]) {
 markBtn.textContent = '‚úì Completed';
 markBtn.classList.add('completed');
 }
 markBtn.addEventListener('click', function() {
 progress[guideId] = {
 completed: true,
 date: new Date().toISOString()
 };
 localStorage.setItem('compendium-progress', JSON.stringify(progress));
 markBtn.textContent = '‚úì Completed';
 markBtn.classList.add('completed');
 });
 }
 // Notes system
 const notesKey = 'compendium-notes-' + guideId;
 const notesArea = document.getElementById('guide-notes-text');
 const savedNotes = localStorage.getItem(notesKey) || '';
 if(notesArea) {
 notesArea.value = savedNotes;
 }
 const saveNotesBtn = document.getElementById('save-notes-btn');
 if(saveNotesBtn) {
 saveNotesBtn.addEventListener('click', function() {
 if(notesArea) {
 localStorage.setItem(notesKey, notesArea.value);
 const status = document.getElementById('notes-status');
 if(status) {
 status.textContent = 'Saved!';
 setTimeout(function() {
 status.textContent = '';
 }, 2000);
 }
 }
 });
 }
 // Notes toggle
 const notesHeader = document.querySelector('.notes-header');
 const notesContent = document.querySelector('.notes-content');
 const notesToggle = document.querySelector('.notes-toggle');
 if(notesHeader) {
 notesHeader.addEventListener('click', function() {
 if(notesContent) {
 notesContent.classList.toggle('open');
 }
 if(notesToggle) {
 notesToggle.classList.toggle('open');
 }
 });
 }
 // Back to top
 const backToTop = document.getElementById('back-to-top');
 if(backToTop) {
 window.addEventListener('scroll', function() {
 backToTop.style.display = window.scrollY > 300 ? 'block' : 'none';
 });
 backToTop.addEventListener('click', function() {
 window.scrollTo({top: 0, behavior: 'smooth'});
 });
 }
})();
 </script><div class="common-mistakes"><h3> Common Mistakes </h3><ul><li> Add specific common mistakes here based on the guide content </li></ul></div><div class="notes-section"><div class="notes-header"><span> My Notes </span><span class="notes-toggle"> ‚ñº </span></div><div class="notes-content"><textarea class="notes-textarea" id="guide-notes-text" placeholder='Add your personal notes here. They will be saved automatically.'></textarea><div class="notes-actions"><button class="save-notes-btn" id="save-notes-btn"> Save Notes </button><span class="notes-status" id="notes-status"></span></div></div></div><button id="back-to-top" title='Back to top'> ‚Üë </button><script>
 (function() {
 // Initialize theme from localStorage
 const savedTheme = localStorage.getItem('compendium-theme') || 'dark';
 document.documentElement.setAttribute('data-theme', savedTheme);
 // Theme toggle
 const themeToggle = document.getElementById('theme-toggle');
 if(themeToggle) {
 themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
 themeToggle.addEventListener('click', function() {
 const current = document.documentElement.getAttribute('data-theme');
 const next = current === 'dark' ? 'light' : 'dark';
 document.documentElement.setAttribute('data-theme', next);
 localStorage.setItem('compendium-theme', next);
 themeToggle.textContent = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
 });
 }
 // Progress tracking
 const guideId = location.pathname.split('/').pop().replace('.html', '');
 const progress = JSON.parse(localStorage.getItem('compendium-progress') || '{}');
 const markBtn = document.getElementById('mark-read-btn');
 if(markBtn) {
 if(progress[guideId]) {
 markBtn.textContent = '‚úì Completed';
 markBtn.classList.add('completed');
 }
 markBtn.addEventListener('click', function() {
 progress[guideId] = {
 completed: true,
 date: new Date().toISOString()
 };
 localStorage.setItem('compendium-progress', JSON.stringify(progress));
 markBtn.textContent = '‚úì Completed';
 markBtn.classList.add('completed');
 });
 }
 // Notes system
 const notesKey = 'compendium-notes-' + guideId;
 const notesArea = document.getElementById('guide-notes-text');
 const savedNotes = localStorage.getItem(notesKey) || '';
 if(notesArea) {
 notesArea.value = savedNotes;
 }
 const saveNotesBtn = document.getElementById('save-notes-btn');
 if(saveNotesBtn) {
 saveNotesBtn.addEventListener('click', function() {
 if(notesArea) {
 localStorage.setItem(notesKey, notesArea.value);
 const status = document.getElementById('notes-status');
 if(status) {
 status.textContent = 'Saved!';
 setTimeout(function() {
 status.textContent = '';
 }, 2000);
 }
 }
 });
 }
 // Notes toggle
 const notesHeader = document.querySelector('.notes-header');
 const notesContent = document.querySelector('.notes-content');
 const notesToggle = document.querySelector('.notes-toggle');
 if(notesHeader) {
 notesHeader.addEventListener('click', function() {
 if(notesContent) {
 notesContent.classList.toggle('open');
 }
 if(notesToggle) {
 notesToggle.classList.toggle('open');
 }
 });
 }
 // Back to top
 const backToTop = document.getElementById('back-to-top');
 if(backToTop) {
 window.addEventListener('scroll', function() {
 backToTop.style.display = window.scrollY > 300 ? 'block' : 'none';
 });
 backToTop.addEventListener('click', function() {
 window.scrollTo({top: 0, behavior: 'smooth'});
 });
 }
})();
 </script><script>
// Bookmark system
(function() {
 const guideName = window.location.pathname.split('/').pop();
 const bookmarks = JSON.parse(localStorage.getItem('compendium-bookmarks') || '{}');
 // Add bookmark icons to all h2 elements
 document.querySelectorAll('h2').forEach((h2, i) => {
 const id = h2.id || 'section-' + i;
 if (!h2.id) h2.id = id;
 const key = guideName + '#' + id;
 const btn = document.createElement('button');
 btn.className = 'bookmark-star';
 btn.textContent = bookmarks[key] ? '‚òÖ' : '‚òÜ';
 btn.style.cssText = 'background:transparent;border:none;font-size:1.3em;cursor:pointer;color:' + (bookmarks[key] ? 'var(--accent)' : 'var(--muted)') + ';margin-left:10px;vertical-align:middle;';
 btn.onclick = function(e) {
 e.preventDefault();
 const bm = JSON.parse(localStorage.getItem('compendium-bookmarks') || '{}');
 if (bm[key]) { delete bm[key]; btn.textContent = '‚òÜ'; btn.style.color = 'var(--muted)'; }
 else { bm[key] = { guide: guideName, section: h2.textContent.replace('‚òÜ','').replace('‚òÖ','').trim(), timestamp: Date.now() }; btn.textContent = '‚òÖ'; btn.style.color = 'var(--accent)'; }
 localStorage.setItem('compendium-bookmarks', JSON.stringify(bm));
 };
 h2.appendChild(btn);
 });
 // Add floating bookmarks panel button
 const panelBtn = document.createElement('button');
 panelBtn.innerHTML = 'üîñ';
 panelBtn.title = 'View Bookmarks';
 panelBtn.style.cssText = 'position:fixed;bottom:70px;right:20px;width:50px;height:50px;border-radius:50%;background:var(--accent2);color:white;border:none;font-size:1.5em;cursor:pointer;z-index:998;box-shadow:0 2px 8px rgba(0,0,0,0.3);';
 panelBtn.onclick = function() {
 const bm = JSON.parse(localStorage.getItem('compendium-bookmarks') || '{}');
 const guideBookmarks = Object.entries(bm).filter(([k]) => k.startsWith(guideName));
 let panel = document.getElementById('bookmark-panel');
 if (panel) { panel.remove(); return; }
 panel = document.createElement('div');
 panel.id = 'bookmark-panel';
 panel.style.cssText = 'position:fixed;bottom:130px;right:20px;width:300px;max-height:400px;overflow-y:auto;background:var(--surface);border:2px solid var(--accent2);border-radius:8px;padding:15px;z-index:999;box-shadow:0 4px 12px rgba(0,0,0,0.3);';
 let html = '<h4 style="color:var(--accent2);margin:0 0 10px 0;">üîñ Bookmarks in This Guide</h4>';
 if (guideBookmarks.length === 0) html += '<p style="color:var(--muted);">No bookmarks yet. Click ‚òÜ next to any heading to bookmark it.</p>';
 else guideBookmarks.forEach(([key, val]) => {
 const sectionId = key.split('#')[1];
 html += '<a href="#'+sectionId+'" style="display:block;padding:8px;margin:4px 0;background:var(--card);border-radius:4px;color:var(--text);text-decoration:none;" onclick="document.getElementById(\'bookmark-panel\').remove();">‚òÖ '+val.section+'</a>';
 });
 html += '<button onclick="this.parentElement.remove()" style="margin-top:10px;padding:6px 12px;background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:4px;cursor:pointer;width:100%;">Close</button>';
 panel.innerHTML = html;
 document.body.appendChild(panel);
 };
 document.body.appendChild(panelBtn);
})();
</script></main><script src="../shared/theme-sync.js"></script><script src="js/shared.js"></script></body></html>