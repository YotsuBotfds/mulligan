<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content='width=device-width, initial-scale=1.0' name="viewport"><title>Petroleum Refining - Offline Compendium</title><link rel="stylesheet" href="css/shared.css"><style>.theme-toggle{background:var(--card);border:1px solid var(--border);color:var(--text);padding:10px 15px;border-radius:5px;cursor:pointer;transition:all .3s ease}.meta-label{color:var(--muted);font-size:.85em;text-transform:uppercase;margin-bottom:5px}.mark-read-btn{background:var(--accent2);color:var(--bg);border:0;padding:10px 20px;border-radius:5px;cursor:pointer;font-weight:bold;transition:all .3s ease}.mark-read-btn:hover,.mark-read-btn.read{background:var(--accent)}navnav.toc h3{color:var(--accent);margin-bottom:15px}navnavnav.toc a{color:var(--accent2);text-decoration:none;transition:all .3s ease}nav.diagram{background:var(--card);padding:20px;border-radius:5px;margin:20px 0;text-align:center;border:1px solid var(--border)}.note-box{background:rgba(83,216,168,0.1);border-left:4px solid var(--accent2);padding:15px;margin:20px 0;border-radius:5px}.note-box strong{color:var(--accent2)}.guide-card{background:var(--card);padding:15px;border-radius:5px;border:1px solid var(--border);transition:all .3s ease}.guide-card:hover{border-color:var(--accent2);transform:translateY(-5px)}.guide-card a{color:var(--accent2);text-decoration:none;font-weight:bold}.guide-card a:hover{color:var(--accent)}#notes-area{background:var(--bg);color:var(--text);padding:10px;border-radius:3px;min-height:100px;border:1px solid var(--border);font-family:'Courier New',monospace;font-size:.9em}.back-to-top.show{display:block}.back-to-top:hover{background:var(--accent2);transform:translateY(-5px)}</style></head><body data-theme="dark"><main role="main"><a class="skip-link" href="#main-content"> Skip to main content </a><div class="container"><a class="back-link" href="../index.html" aria-label='Back to guide list'> ‚Üê Back to Index </a><header><div><h1> Petroleum Refining </h1><div class="top-controls"><button class="theme-toggle" aria-label='Toggle dark/light theme' id="theme-toggle" title='Toggle dark/light mode'> ‚òÄÔ∏è </button><button class="mark-read-btn" aria-label='Mark this guide as read' id="mark-read-btn" title='Mark this guide as completed'> Mark as Read </button></div><div class="guide-metadata"><span class="difficulty"> Difficulty: ‚óè‚óè‚óè‚óã‚óã </span><span class="read-time"> üìñ ~12 min read </span></div><p style='color: var(--muted);'> From crude oil to fuel products and lubricants </p></div><button class="theme-toggle" aria-label='Toggle dark/light theme' onclick="toggleTheme()"> üåô Dark </button></header><div class="metadata"><div class="meta-item"><span class="meta-label"> Difficulty </span><span class="meta-value"> Advanced </span></div><div class="meta-item"><span class="meta-label"> Read Time </span><span class="meta-value"> 55 minutes </span></div><div class="meta-item"><span class="meta-label"> Tier </span><span class="meta-value"> 1 - Priority </span></div></div><nav class="toc" role="navigation" aria-label='Table of contents'><h3> Table of Contents </h3><ul><li><a href="#crude-composition"> Crude Oil Composition and Origin </a></li><li><a href="#simple-distillation"> Simple Distillation Apparatus </a></li><li><a href="#fractional-distillation"> Fractional Distillation Column Design </a></li><li><a href="#fractions"> Product Fractions and Properties </a></li><li><a href="#cracking"> Cracking: Thermal and Catalytic </a></li><li><a href="#lubricants"> Lubricant Production and Grading </a></li><li><a href="#storage"> Fuel Storage and Safety </a></li><li><a href="#biofuels"> Biofuel Alternatives </a></li><li><a href="#biodiesel"> Biodiesel Production </a></li><li><a href="#troubleshooting"> Troubleshooting Refining Issues </a></li></ul></nav><section id="crude-composition"><h2> Crude Oil Composition and Origin </h2><p> Crude oil is a complex mixture of hydrocarbons‚Äîcompounds containing only carbon (C) and hydrogen (H). It originated from marine organisms and plant material deposited in ancient seas millions of years ago. Over time, heat, pressure, and microbial action converted this organic matter into oil. </p><h3> Hydrocarbon Types in Crude Oil </h3><table><tr><th scope="row"> Hydrocarbon Type </th><th scope="row"> Structure </th><th scope="row"> Boiling Point Range </th><th scope="row"> % in Typical Crude </th></tr><tr><td> Alkanes (paraffins) </td><td> C‚ÇôH‚ÇÇ‚Çô‚Çä‚ÇÇ straight or branched chains </td><td> -160 to +400¬∞C (depending on C number) </td><td> 60-80% </td></tr><tr><td> Cycloalkanes (naphthenes) </td><td> Ring structures with H atoms; C‚ÇÖ-C‚Çà typical </td><td> 80-300¬∞C </td><td> 10-30% </td></tr><tr><td> Aromatics </td><td> Benzene rings (C‚ÇÜH‚ÇÑ repeating); C‚ÇôH‚ÇÇ‚Çô‚Çã‚ÇÜ </td><td> 80-350¬∞C </td><td> 5-15% </td></tr><tr><td> Sulfur compounds </td><td> Thiols, sulfides, disulfides; elemental S </td><td> Variable </td><td> 0.5-5% </td></tr><tr><td> Nitrogen/oxygen compounds </td><td> Amines, acids, esters (concentrated in heavy fractions) </td><td> High boiling point </td><td> 0.1-1% </td></tr><tr><td> Trace metals </td><td> Nickel, vanadium, iron (as complex organics) </td><td> N/A </td><td> 0.01-0.1% </td></tr></table><h3> Crude Oil Classification </h3><p> Crude oils vary significantly in composition and properties. Classification is based on API gravity and sulfur content: </p><ul style='margin: 15px 0 15px 30px;'><li><strong> API Gravity = (141.5 / specific gravity at 15.6¬∞C) - 131.5 </strong></li><li> Light crude: >31¬∞ API (lower density, more paraffinic, better yields of gasoline) </li><li> Medium crude: 22-31¬∞ API (balanced composition) </li><li> Heavy crude: <22¬∞ API (high viscosity, more sulfur, requires additional processing) </li></ul><p><strong> Sulfur classification: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Sweet crude: <0.5% sulfur (easier to refine, produces lower-sulfur products) </li><li> Sour crude: >0.5% sulfur (requires desulfurization; creates H‚ÇÇS hazard) </li></ul></section><section id="simple-distillation"><h2> Simple Distillation Apparatus Construction </h2><p> Distillation separates crude oil components by boiling point. A simple distillation apparatus can be constructed from laboratory or repurposed materials for small-scale demonstration or pilot testing. </p><h3> Basic Components </h3><ol style='margin: 15px 0 15px 30px;'><li><strong> Heat source: </strong> Furnace, heating mantle, or open flame (use open flame only with extreme caution‚Äîpetroleum vapors are flammable) </li><li><strong> Round-bottom or flat-bottom flask: </strong> Borosilicate glass, 500 mL to 2 L capacity </li><li><strong> Thermometer: </strong> 0-360¬∞C range to measure vapor temperature </li><li><strong> Condenser: </strong> Water-cooled Liebig or Graham condenser, or air-cooled spiral coil </li><li><strong> Receiving flasks: </strong> Multiple labeled receivers for fractions </li><li><strong> Distillation head: </strong> Connects flask to condenser, with thermometer pocket for accurate vapor temperature reading </li></ol><h3> Assembly Procedure </h3><ol style='margin: 15px 0 15px 30px;'><li> Secure the round-bottom flask on a ring stand using a flask clamp </li><li> Attach the distillation head to the flask opening using a rubber or PTFE adapter (no grease) </li><li> Insert the thermometer into the thermometer pocket; the bulb should align with the side arm exit level </li><li> Attach the condenser to the distillation head outlet; angle the condenser downward (~20¬∞) for gravity-assisted flow </li><li> Connect water cooling: inlet at the bottom, outlet at the top (countercurrent flow improves cooling) </li><li> Position the receiving flask at the condenser outlet; a "pig" adapter allows switching receivers mid-distillation </li><li> Test all connections for air tightness; seal with PTFE tape if needed (never use grease with petroleum) </li></ol><div class="warning"> Petroleum vapor at distillation temperatures is extremely flammable. Never use an open flame directly under the flask. Use an electric heating mantle, sand bath, or oil bath. Ensure adequate ventilation. No smoking or ignition sources within 10 meters. </div></section><section id="fractional-distillation"><h2> Fractional Distillation Column Design </h2><p> Industrial fractional distillation uses a tall column (fractionating tower) with internal trays or packing to create multiple theoretical plates. Each plate represents an equilibrium stage, allowing efficient separation. </p><div class="diagram" role="figure" aria-label="Diagram"><svg viewbox='0 0 600 700' xmlns="http://www.w3.org/2000/svg" aria-label='Petroleum Refining diagram 1'><rect fill="none" height="550" stroke="currentColor" stroke-width="3" width="300" x="150" y="50"></rect><line stroke="currentColor" stroke-dasharray="2,2" stroke-width="1" x1="150" x2="450" y1="150" y2="150"></line><line stroke="currentColor" stroke-dasharray="2,2" stroke-width="1" x1="150" x2="450" y1="220" y2="220"></line><line stroke="currentColor" stroke-dasharray="2,2" stroke-width="1" x1="150" x2="450" y1="290" y2="290"></line><line stroke="currentColor" stroke-dasharray="2,2" stroke-width="1" x1="150" x2="450" y1="360" y2="360"></line><line stroke="currentColor" stroke-dasharray="2,2" stroke-width="1" x1="150" x2="450" y1="430" y2="430"></line><line stroke="currentColor" stroke-dasharray="2,2" stroke-width="1" x1="150" x2="450" y1="500" y2="500"></line><text fill="currentColor" font-size="12" font-weight="bold" x="500" y="80"> Gas </text><text fill="currentColor" font-size="11" x="500" y="120"> C1-C4 </text><text fill="currentColor" font-size="12" font-weight="bold" x="500" y="180"> Gasoline </text><text fill="currentColor" font-size="11" x="500" y="210"> 40-200¬∞C </text><text fill="currentColor" font-size="12" font-weight="bold" x="500" y="260"> Naphtha </text><text fill="currentColor" font-size="11" x="500" y="290"> 150-240¬∞C </text><text fill="currentColor" font-size="12" font-weight="bold" x="500" y="330"> Kerosene </text><text fill="currentColor" font-size="11" x="500" y="360"> 150-275¬∞C </text><text fill="currentColor" font-size="12" font-weight="bold" x="500" y="400"> Diesel </text><text fill="currentColor" font-size="11" x="500" y="430"> 250-350¬∞C </text><text fill="currentColor" font-size="12" font-weight="bold" x="500" y="470"> Fuel Oil </text><text fill="currentColor" font-size="11" x="500" y="500"> 300-450¬∞C </text><text fill="currentColor" font-size="12" font-weight="bold" x="500" y="540"> Bitumen </text><text fill="currentColor" font-size="11" x="500" y="570"> >500¬∞C </text><line stroke="currentColor" stroke-width="2" x1="100" x2="150" y1="350" y2="350"></line><text fill="currentColor" font-size="12" x="50" y="355"> Heated crude </text><text fill="currentColor" font-size="12" font-weight="bold" x="300" y="630"> Reboiler (Heat Input) ~350¬∞C </text><text fill="currentColor" font-size="11" x="70" y="80"> ~20¬∞C </text><text fill="currentColor" font-size="11" x="70" y="350"> ~200¬∞C </text><text fill="currentColor" font-size="11" x="70" y="580"> ~350¬∞C </text></svg><div class="diagram-label"> Fractional distillation tower: Products separate by boiling point; lighter fractions exit top, heavier fractions exit bottom </div></div><h3> Tower Design Parameters </h3><table><tr><th scope="row"> Component </th><th scope="row"> Purpose </th><th scope="row"> Design Consideration </th></tr><tr><td> Column height </td><td> More plates = better separation; typically 30-60m in industrial units </td><td> Height ‚âà (desired separation) √ó (height per theoretical plate); 0.5-1m per plate typical </td></tr><tr><td> Diameter </td><td> Accommodate vapor and liquid flow rates </td><td> Vapor velocity ‚âà 1-2 m/s to prevent excessive pressure drop </td></tr><tr><td> Trays or packing </td><td> Increase surface contact between liquid and vapor </td><td> Bubble cap trays or structured metal packing (more efficient than random packing) </td></tr><tr><td> Reboiler </td><td> Supply heat; vaporize bottom product </td><td> Duty = (feed rate) √ó (latent heat); typically steam or fire-tube heated </td></tr><tr><td> Condenser (top) </td><td> Cool vapors; reflux liquid back to column </td><td> Duty ‚âà 40-60% of reboiler duty; must handle vapor enthalpy </td></tr><tr><td> Reflux ratio </td><td> Ratio of liquid returned to column vs. product withdrawn </td><td> Higher reflux (3:1 to 10:1) improves separation but requires more energy </td></tr></table><h3> Simple Retort Distillation Setup </h3><div class="diagram" role="figure" aria-label='Simple retort distillation apparatus for crude oil fractionation'><svg viewbox='0 0 600 500' xmlns="http://www.w3.org/2000/svg" aria-label='Petroleum Refining diagram 2'><rect fill="#1a2e1a" height="500" width="600"></rect><g id="frame"><line stroke="#8B8680" stroke-width="3" x1="80" x2="80" y1="50" y2="350"></line><line stroke="#8B8680" stroke-width="3" x1="520" x2="520" y1="50" y2="350"></line><line stroke="#8B8680" stroke-width="3" x1="80" x2="520" y1="50" y2="50"></line><line stroke="#8B8680" stroke-width="3" x1="80" x2="520" y1="350" y2="350"></line></g><g id="flask"><ellipse cx="300" cy="280" fill="#2d2416" rx="60" ry="50" stroke="#b8956a" stroke-width="2"></ellipse><text fill="#f5f0e8" font-size="11" text-anchor="middle" x="300" y="280">Heated crude oil</text><text fill="#aaa" font-size="10" text-anchor="middle" x="300" y="295">200-350¬∞C</text></g><g id="distillation-head"><line stroke="#b8956a" stroke-width="2" x1="300" x2="300" y1="230" y2="150"></line><polygon fill="#b8956a" points='300,150 295,165 305,165'></polygon><text fill="#f5f0e8" font-size="10" x="340" y="155">Distillation head</text></g><g id="thermometer"><line stroke="#d4a574" stroke-width="2" x1="320" x2="320" y1="135" y2="180"></line><circle cx="320" cy="185" fill="#e94560" r="3"></circle><text fill="#d4a574" font-size="10" x="335" y="160">Thermometer</text><text fill="#aaa" font-size="9" x="335" y="172">(measures vapor temp)</text></g><g id="condenser"><rect fill="none" height="80" stroke="#53d8a8" stroke-width="3" width="20" x="285" y="60"></rect><line stroke="#2a9cd6" stroke-width="1" x1="280" x2="310" y1="70" y2="70"></line><line stroke="#2a9cd6" stroke-width="1" x1="280" x2="310" y1="90" y2="90"></line><line stroke="#2a9cd6" stroke-width="1" x1="280" x2="310" y1="110" y2="110"></line><text fill="#53d8a8" font-size="10" x="330" y="100">Water-cooled</text><text fill="#53d8a8" font-size="10" x="330" y="115">condenser</text></g><g id="adapter"><path d='M 310 60 L 360 40 Q 370 35 380 45' fill="none" stroke="#b8956a" stroke-width="2"></path><text fill="#aaa" font-size="9" x="390" y="50">Adapter to receiver</text></g><g id="receivers"><g id="r1"><rect fill="#d4a574" height="40" opacity="0.2" stroke="#d4a574" stroke-width="2" width="35" x="395" y="30"></rect><text fill="#f5f0e8" font-size="10" font-weight="bold" text-anchor="middle" x="412" y="55">Light</text><text fill="#aaa" font-size="9" text-anchor="middle" x="412" y="68">40-200¬∞C</text></g><g id="r2"><rect fill="#d4a574" height="40" opacity="0.4" stroke="#d4a574" stroke-width="2" width="35" x="435" y="30"></rect><text fill="#f5f0e8" font-size="10" font-weight="bold" text-anchor="middle" x="452" y="55">Heavy</text><text fill="#aaa" font-size="9" text-anchor="middle" x="452" y="68">200-300¬∞C</text></g><g id="r3"><rect fill="#d4a574" height="40" opacity="0.6" stroke="#d4a574" stroke-width="2" width="35" x="475" y="30"></rect><text fill="#f5f0e8" font-size="10" font-weight="bold" text-anchor="middle" x="492" y="55">Residue</text><text fill="#aaa" font-size="9" text-anchor="middle" x="492" y="68">300+¬∞C</text></g></g><g id="heating"><rect fill="#e94560" height="30" rx="3" stroke="#e94560" stroke-width="2" width="120" x="240" y="320"></rect><text fill="#fff" font-size="11" text-anchor="middle" x="300" y="340">Electric heating mantle</text></g><g id="notes"><text fill="#aaa" font-size="10" x="80" y="420">Products separate by boiling point temperature during distillation.</text><text fill="#aaa" font-size="10" x="80" y="440">Light fractions (gasoline, naphtha) condense first (top of column).</text><text fill="#aaa" font-size="10" x="80" y="460">Heavy fractions (fuel oil) condense later (lower sections).</text></g></svg></div>
<h3> Simple Plate-Type Fractionation Column (Small-Scale) </h3><p><strong> Materials: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Glass tube or stainless steel tube, 50-100mm diameter, 1-2m tall </li><li> Metal or glass bubble cap trays (5-8 per meter of height) </li><li> Insulation (fiberglass wool or asbestos tape) to minimize heat loss </li><li> Thermometers at multiple levels to monitor temperature profile </li></ul><p><strong> Construction: </strong></p><ol style='margin: 15px 0 15px 30px;'><li> Stack bubble cap trays inside the column at 200-300mm intervals </li><li> Each tray allows vapor to bubble up through a layer of descending liquid </li><li> Ensure each tray has downcomers for liquid to fall to the tray below </li><li> Heat the bottom using a reboiler (electric or steam-heated); maintain temperature at 300-350¬∞C </li><li> Cool the top with a reflux condenser; return majority of condensate to the column </li><li> Draw product from each tray level or use a side-stream product withdrawal </li><li> Insulate the entire column to minimize heat loss </li></ol></section><section id="fractions"><h2> Product Fractions and Properties </h2><div class="diagram" role="figure" aria-label="Diagram"><svg viewbox='0 0 800 500' xmlns="http://www.w3.org/2000/svg" aria-label='Petroleum Refining diagram 3'><rect fill='rgba(233, 69, 96, 0.3)' height="30" stroke="currentColor" stroke-width="2" width="100" x="50" y="50"></rect><text fill="currentColor" font-size="12" font-weight="bold" text-anchor="middle" x="100" y="80"> Gases </text><text fill="currentColor" font-size="10" text-anchor="middle" x="100" y="95"> C1-C4 </text><rect fill='rgba(233, 69, 96, 0.4)' height="30" stroke="currentColor" stroke-width="2" width="100" x="160" y="50"></rect><text fill="currentColor" font-size="12" font-weight="bold" text-anchor="middle" x="210" y="80"> Gasoline </text><text fill="currentColor" font-size="10" text-anchor="middle" x="210" y="95"> 40-200¬∞C </text><rect fill='rgba(233, 69, 96, 0.5)' height="30" stroke="currentColor" stroke-width="2" width="100" x="270" y="50"></rect><text fill="currentColor" font-size="12" font-weight="bold" text-anchor="middle" x="320" y="80"> Naphtha </text><text fill="currentColor" font-size="10" text-anchor="middle" x="320" y="95"> 150-240¬∞C </text><rect fill='rgba(233, 69, 96, 0.6)' height="30" stroke="currentColor" stroke-width="2" width="100" x="380" y="50"></rect><text fill="currentColor" font-size="12" font-weight="bold" text-anchor="middle" x="430" y="80"> Kerosene </text><text fill="currentColor" font-size="10" text-anchor="middle" x="430" y="95"> 150-275¬∞C </text><rect fill='rgba(233, 69, 96, 0.7)' height="30" stroke="currentColor" stroke-width="2" width="100" x="490" y="50"></rect><text fill="currentColor" font-size="12" font-weight="bold" text-anchor="middle" x="540" y="80"> Diesel </text><text fill="currentColor" font-size="10" text-anchor="middle" x="540" y="95"> 250-350¬∞C </text><rect fill='rgba(233, 69, 96, 0.8)' height="30" stroke="currentColor" stroke-width="2" width="100" x="600" y="50"></rect><text fill="currentColor" font-size="12" font-weight="bold" text-anchor="middle" x="650" y="80"> Fuel Oil </text><text fill="currentColor" font-size="10" text-anchor="middle" x="650" y="95"> 300-450¬∞C </text><rect fill='rgba(233, 69, 96, 0.9)' height="30" stroke="currentColor" stroke-width="2" width="40" x="710" y="50"></rect><text fill="currentColor" font-size="11" font-weight="bold" text-anchor="middle" x="730" y="80"> Bit. </text><text fill="currentColor" font-size="9" text-anchor="middle" x="730" y="95"> >500¬∞C </text><text fill="currentColor" font-size="10" text-anchor="middle" x="100" y="150"> Lightest </text><text fill="currentColor" font-size="10" text-anchor="middle" x="650" y="150"> Heaviest </text><text fill="currentColor" font-size="12" font-weight="bold" x="50" y="200"> Property </text><text fill="currentColor" font-size="12" font-weight="bold" x="200" y="200"> Gasoline </text><text fill="currentColor" font-size="12" font-weight="bold" x="380" y="200"> Diesel </text><text fill="currentColor" font-size="12" font-weight="bold" x="580" y="200"> Fuel Oil </text><text fill="currentColor" font-size="11" x="50" y="230"> Density (g/cm¬≥) </text><text fill="currentColor" font-size="11" x="200" y="230"> 0.70-0.75 </text><text fill="currentColor" font-size="11" x="380" y="230"> 0.82-0.90 </text><text fill="currentColor" font-size="11" x="580" y="230"> 0.95-1.04 </text><text fill="currentColor" font-size="11" x="50" y="260"> Viscosity </text><text fill="currentColor" font-size="11" x="200" y="260"> 0.4-0.8 cSt </text><text fill="currentColor" font-size="11" x="380" y="260"> 2-8 cSt </text><text fill="currentColor" font-size="11" x="580" y="260"> 50-500+ cSt </text><text fill="currentColor" font-size="11" x="50" y="290"> Flash point </text><text fill="currentColor" font-size="11" x="200" y="290"> -40 to 0¬∞C </text><text fill="currentColor" font-size="11" x="380" y="290"> 38-65¬∞C </text><text fill="currentColor" font-size="11" x="580" y="290"> 150-300¬∞C </text></svg><div class="diagram-label"> Petroleum fractions ordered by boiling point, density, and viscosity (increasing left to right) </div></div><h3> Detailed Fraction Properties </h3><table><tr><th scope="row"> Fraction </th><th scope="row"> Boiling Range </th><th scope="row"> Primary Use </th><th scope="row"> Key Property </th></tr><tr><td> Gases (LPG) </td><td> <40¬∞C </td><td> Fuel for heating/cooking; chemical feedstock </td><td> Propane/butane; gaseous at room temp; liquefiable under pressure </td></tr><tr><td> Gasoline (Petrol) </td><td> 40-200¬∞C </td><td> Automobile fuel (spark-ignition engines) </td><td> Octane rating 80-98; high volatility; rapid combustion </td></tr><tr><td> Naphtha </td><td> 150-240¬∞C </td><td> Petrochemical feedstock; solvent; lighter fuel </td><td> Intermediate volatility; used in reforming units to make gasoline </td></tr><tr><td> Kerosene </td><td> 150-275¬∞C </td><td> Jet fuel; heating oil; lighting fuel </td><td> Moderate viscosity; flash point 35-65¬∞C; burns cleanly for illumination </td></tr><tr><td> Diesel </td><td> 250-350¬∞C </td><td> Diesel engine fuel; heating oil </td><td> Cetane number 40-55; self-ignites under compression; high energy density </td></tr><tr><td> Fuel Oil </td><td> 300-450¬∞C </td><td> Marine fuel; power station fuel; heating oil </td><td> High sulfur content; very viscous; requires heating for handling </td></tr><tr><td> Bitumen </td><td> >500¬∞C </td><td> Road asphalt; waterproofing membranes </td><td> Extremely viscous; plastic at 60-80¬∞C; binding agent for aggregate </td></tr></table></section><section id="cracking"><h2> Cracking: Thermal and Catalytic </h2><p> Cracking breaks large hydrocarbon molecules into smaller, more valuable ones. This is critical for maximizing gasoline yield from crude oil. </p><h3> Thermal Cracking </h3><p> Heating heavy fractions (fuel oil, bitumen) to 350-500¬∞C under pressure causes C-C bonds to break randomly, producing lighter hydrocarbons and gaseous products. </p><p><strong> Reaction example: </strong> C‚ÇÅ‚ÇÜH‚ÇÉ‚ÇÑ ‚Üí C‚ÇàH‚ÇÅ‚Çà + C‚ÇàH‚ÇÅ‚ÇÜ (one chain breaks into two) </p><p><strong> Operating conditions: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Temperature: 400-500¬∞C (higher temperature increases cracking) </li><li> Pressure: 10-100 atm (prevents vaporization of products) </li><li> Residence time: 5-30 minutes (longer time = more cracking) </li><li> Feed rate: Control to maintain temperature </li></ul><p><strong> Advantages: </strong> Simple equipment; no catalysts needed; can crack any heavy fraction </p><p><strong> Disadvantages: </strong> Produces coke (carbon deposits on equipment); random cracking yields uncontrolled product distribution; product contains unwanted alkenes (olefins) that are less stable </p><h3> Catalytic Cracking </h3><p> Using a zeolite or silica-alumina catalyst at lower temperatures (350-450¬∞C) enables controlled, selective cracking to produce more gasoline-range products with fewer undesirable byproducts. </p><p><strong> Catalyst: </strong> Zeolite Y or silica-alumina (SiO‚ÇÇ/Al‚ÇÇO‚ÇÉ) mixed bed </p><p><strong> Advantages: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Lower temperature reduces coke formation </li><li> Selective cracking produces desired product distribution </li><li> Catalyst can be regenerated by burning off coke in air </li><li> Better gasoline yield </li></ul><p><strong> Simple catalytic cracking setup: </strong></p><ol style='margin: 15px 0 15px 30px;'><li> Pack a steel or ceramic tube (50mm diameter, 500mm long) with zeolite catalyst beads </li><li> Heat the tube to 400-450¬∞C using an electric furnace or heating coil </li><li> Pass heavy oil vapor (preheated to 200-250¬∞C) downward through the catalyst bed </li><li> Collect vapors exiting the bottom of the tube; cool in a condenser </li><li> Separate liquid (cracked gasoline/naphtha) from gases </li><li> Periodically regenerate catalyst: pass air through the heated tube at 600¬∞C for 1-2 hours to burn off coke </li></ol><h3> Hydrocracking </h3><p> Adding hydrogen gas during cracking further improves product quality by saturating unwanted olefins and removing sulfur/nitrogen impurities. </p><p><strong> Reaction with hydrogen: </strong> C‚ÇÅ‚ÇÜH‚ÇÉ‚ÇÑ + H‚ÇÇ ‚Üí lighter alkanes with improved stability </p><p><strong> Catalyst: </strong> Nickel-molybdenum on alumina (NiMo/Al‚ÇÇO‚ÇÉ), active for both cracking and hydrogenation </p><p><strong> Conditions: </strong> 300-400¬∞C, 100-250 atm, H‚ÇÇ:oil ratio 2-5:1 </p></section><section id="lubricants"><h2> Lubricant Production and Grading </h2><p> High-quality lubricating oils are refined from the fuel oil and bitumen fractions through additional processing to improve viscosity index and remove oxidation-prone components. </p><h3> Lubricant Grades (ISO VG Classification) </h3><table><tr><th scope="row"> ISO Grade </th><th scope="row"> Nominal Viscosity (cSt @ 40¬∞C) </th><th scope="row"> Typical Applications </th></tr><tr><td> ISO 10 </td><td> 10 </td><td> Precision machinery, hydraulic systems (light duty) </td></tr><tr><td> ISO 32 </td><td> 32 </td><td> Hydraulic systems, gearbox (light) </td></tr><tr><td> ISO 46 </td><td> 46 </td><td> Most industrial gear systems, hydraulic pumps </td></tr><tr><td> ISO 68 </td><td> 68 </td><td> Heavy-duty gears, slow-speed bearings </td></tr><tr><td> ISO 100 </td><td> 100 </td><td> Very heavy equipment, slow-speed high-load bearings </td></tr><tr><td> ISO 220-1000 </td><td> 220-1000 </td><td> Extremely heavy industrial equipment, gear oils </td></tr></table><h3> Producing Mineral Oil Lubricants </h3><p><strong> Step 1: Solvent Extraction </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Mix fuel oil fraction with a solvent (phenol or naphthol) to selectively dissolve aromatic compounds and sulfur-containing compounds </li><li> The paraffinic/naphthenic base oil remains insoluble and is recovered </li><li> The solution is vacuum-distilled to recover the solvent and produce refined base oil </li></ul><p><strong> Step 2: Solvent Dewaxing </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Mix the base oil with acetone or methyl ethyl ketone (MEK) </li><li> Cool the mixture to -15 to 0¬∞C; wax precipitates as crystals </li><li> Filter to separate wax; recover solvent by distillation </li><li> This reduces pour point (lowest temperature the oil flows) </li></ul><p><strong> Step 3: Hydrotreating </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Pass the base oil with hydrogen gas over a Ni-Mo catalyst at 300-350¬∞C, 50-100 atm </li><li> Removes sulfur, nitrogen, and oxygen compounds; improves oxidation stability </li><li> Produces very clear, stable, colorless base oil </li></ul><p><strong> Step 4: Additives (for finished oils) </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Viscosity Index Improvers: Long-chain polymers that resist viscosity change with temperature </li><li> Antioxidants: Phenolic or aminic compounds prevent gum formation </li><li> Corrosion inhibitors: Protect ferrous metals from rust </li><li> Dispersants: Keep sludge suspended (for used oil) </li><li> Extreme Pressure (EP) Agents: Zinc dialkyldithiophosphates for gear oils under high load </li></ul><p><strong> Formulation example for ISO 46 hydraulic oil: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Base oil (paraffinic blend): 95% </li><li> Viscosity index improver (PIB): 4% </li><li> Antioxidant package: 0.5% </li><li> Corrosion/foam inhibitor: 0.5% </li></ul></section><section id="storage"><h2> Fuel Storage and Safety </h2><div class="warning"> All petroleum products are flammable. Gasoline vapors ignite at -43¬∞C. Diesel ignites at 210¬∞C (flash point). Proper storage prevents accidents, environmental contamination, and product degradation. </div><h3> Storage Tank Design </h3><table><tr><th scope="row"> Feature </th><th scope="row"> Purpose </th><th scope="row"> Specification </th></tr><tr><td> Material </td><td> Contain corrosive/flammable liquid </td><td> Carbon steel (internally coated) or stainless steel (304/316L) </td></tr><tr><td> Ventilation (breathing) </td><td> Equalize pressure as liquid level changes </td><td> Air filter with desiccant; prevents moisture ingress and vacuum formation </td></tr><tr><td> Earthing/bonding </td><td> Dissipate static electricity </td><td> Continuous conductor connection to ground; <1 ohm resistance </td></tr><tr><td> Overflow containment </td><td> Capture spills if tank is overfilled </td><td> Secondary containment = 110% of tank volume </td></tr><tr><td> Gauge glass/dip stick </td><td> Measure liquid level safely </td><td> For flammable liquids, use float-type gauge; avoid open gauges </td></tr><tr><td> Filler cap </td><td> Minimize vapor loss and contamination </td><td> Flame arrestor in cap prevents external flame entry </td></tr></table><h3> Storage Conditions </h3><ul style='margin: 15px 0 15px 30px;'><li><strong> Temperature: </strong> Store at 5-25¬∞C. High temperature promotes oxidation and vapor loss; below 5¬∞C some products become too viscous </li><li><strong> Light exposure: </strong> Store in opaque tanks or covered containers. Ultraviolet light promotes gum formation </li><li><strong> Water contamination: </strong> Drain any water from the tank bottom monthly. Use desiccant breathers. Water promotes rust and fuel degradation </li><li><strong> Metal contact: </strong> Minimize iron, copper, and brass contact. These metals catalyze oxidation. Use stainless steel or painted steel </li><li><strong> Stirring: </strong> Gentle agitation prevents sediment settling and water accumulation at the bottom </li></ul><h3> Safe Handling Procedures </h3><ul style='margin: 15px 0 15px 30px;'><li> Ground all containers, pumps, and hoses before transfer (prevent static spark) </li><li> Transfer at <1.5 m/s flow rate to minimize splashing and static generation </li><li> Use non-sparking tools (bronze or plastic, never steel-on-steel) </li><li> Never allow smoking, open flames, or high-temperature surfaces (>430¬∞C) near storage </li><li> Keep portable fire extinguishers rated for flammable liquid (Class B) within 50m of storage </li><li> Label all containers with product type, hazard warnings, and date received </li></ul></section><section id="biofuels"><h2> Biofuel Alternatives </h2><h3> Wood Gas (Producer Gas) Production </h3><p> Gasification of wood in a low-oxygen environment produces a combustible mixture of CO, H‚ÇÇ, CH‚ÇÑ, and N‚ÇÇ that can fuel internal combustion engines or generate heat. </p><p><strong> Simple wood gasifier construction: </strong></p><ol style='margin: 15px 0 15px 30px;'><li> Build a steel drum (200 L) filled with wood chips or charcoal </li><li> Create a grate at the bottom to support the fuel </li><li> Add a small air inlet near the bottom for controlled oxygen supply </li><li> Ignite the wood; the burning zone moves upward as fuel is consumed </li><li> Extract gas from the top of the drum before it cools (use insulation to maintain ~500-800¬∞C reaction zone) </li><li> Cool and filter the gas through a cyclone and water scrubber to remove tars and particulates </li><li> Dry the gas using a desiccant bed before use </li></ol><p><strong> Product composition: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> CO: 15-20% (primary energy source) </li><li> H‚ÇÇ: 10-15% (energy source) </li><li> CH‚ÇÑ: 2-5% (energy source) </li><li> N‚ÇÇ: 45-55% (inert diluent) </li><li> CO‚ÇÇ: 5-10% (inert) </li></ul><p><strong> Energy content: </strong> ~4-6 MJ/m¬≥ (lower than natural gas at ~38 MJ/m¬≥ due to N‚ÇÇ diluent) </p><h3> Ethanol Fermentation </h3><p> Producing alcohol from carbohydrates using yeast fermentation can supplement petroleum as a fuel additive or standalone fuel. </p><p><strong> Basic fermentation reaction: </strong> C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ ‚Üí 2 C‚ÇÇH‚ÇÖOH + 2 CO‚ÇÇ </p><p><strong> Feedstock options: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Sugar cane: Direct fermentation of juice; highest yield </li><li> Corn: Must hydrolyze starch (enzymes or acids) to glucose first </li><li> Grain (wheat, barley): Similar to corn; requires starch hydrolysis </li><li> Cellulose (wood, straw): Requires acid hydrolysis to release glucose (less efficient) </li></ul><p><strong> Fermentation procedure: </strong></p><ol style='margin: 15px 0 15px 30px;'><li> Prepare sugar solution (15-25% glucose by weight) </li><li> Pasteurize at 80¬∞C for 15-20 minutes to sterilize </li><li> Cool to 20-25¬∞C </li><li> Inoculate with yeast (Saccharomyces cerevisiae) at ~10‚Å∂ cells/mL </li><li> Ferment anaerobically (exclude air) for 5-14 days depending on yeast strain and temperature </li><li> Monitor with a hydrometer: fermentation ends when specific gravity stabilizes (typically 1.00 or lower) </li><li> Distill the fermented "mash" to concentrate alcohol: alcohol vaporizes at 78¬∞C while water is at 100¬∞C </li><li> Collect vapors in a condenser to obtain 90-95% ethanol </li></ol></section><section id="biodiesel"><h2> Biodiesel Production: Transesterification </h2><p> Biodiesel is produced from vegetable oils or animal fats through transesterification with methanol or ethanol, producing fatty acid methyl esters (FAME) and glycerol as a byproduct. </p><h3> Chemistry </h3><p><strong> Transesterification reaction: </strong></p><p> Triglyceride + 3 MeOH ‚Üí 3 FAME + Glycerol (with KOH or NaOH catalyst) </p><h3> Simple Biodiesel Production Procedure </h3><p><strong> Materials: </strong></p><ul style='margin: 15px 0 15px 30px;'><li> Used or virgin vegetable oil (canola, soybean, or waste fryer oil): 1 liter </li><li> Methanol: 200 mL (20% by volume) </li><li> Potassium hydroxide (KOH) or sodium hydroxide (NaOH): 3.5-5 g </li><li> Distilled water </li></ul><p><strong> Procedure: </strong></p><ol style='margin: 15px 0 15px 30px;'><li> If using waste fryer oil, filter through cheesecloth to remove food particles </li><li> If water content >0.5%, dry the oil: heat to 110¬∞C for 1 hour with gentle stirring (removes water); or use molecular sieves </li><li> Warm the oil to 50-60¬∞C in a suitable container </li><li> Dissolve KOH in methanol (mix methanol with KOH; exothermic reaction‚Äîuse caution) </li><li> Add the KOH-methanol solution to the warm oil slowly, stirring continuously </li><li> Continue stirring at 50-60¬∞C for 1-2 hours; the mixture will darken and thicken </li><li> Stop stirring and allow to settle for 12-24 hours; two layers will separate: biodiesel (top, less dense) and glycerol (bottom, dense) </li><li> Drain the glycerol layer from the bottom </li><li> Wash the biodiesel layer with warm distilled water (50¬∞C) in a 1:1 volume ratio, stir gently, allow to separate </li><li> Repeat washing 2-3 times until wash water is clear (removes unreacted methanol and KOH residue) </li><li> Drain the final water layer; the remaining biodiesel is ready for use </li><li> Optional: Heat to 60¬∞C for 10-15 minutes to evaporate residual water </li></ol><h3> Biodiesel Properties and Storage </h3><table><tr><th scope="row"> Property </th><th scope="row"> Biodiesel </th><th scope="row"> Petroleum Diesel </th></tr><tr><td> Flash point </td><td> 130-180¬∞C </td><td> 38-65¬∞C </td></tr><tr><td> Viscosity </td><td> 3.5-5.0 cSt @ 40¬∞C </td><td> 2-8 cSt @ 40¬∞C </td></tr><tr><td> Cetane number </td><td> 48-65 </td><td> 40-55 </td></tr><tr><td> Sulfur content </td><td> <0.01% </td><td> 0.05-0.5% (depending on grade) </td></tr><tr><td> Oxidation stability </td><td> Lower than diesel (more oxidation-prone) </td><td> Good in fresh state </td></tr><tr><td> Lubricity </td><td> Excellent (good for fuel pumps) </td><td> Lower than biodiesel </td></tr></table><p><strong> Storage: </strong> Biodiesel is more hygroscopic (absorbs water) than petroleum diesel. Store in sealed, opaque containers at <20¬∞C. Monitor water content; if >0.05%, dry or replace. Without additives, shelf life is 6-12 months. </p></section><section id="troubleshooting"><h2> Troubleshooting Refining Issues </h2><table><tr><th scope="row"> Problem </th><th scope="row"> Likely Cause </th><th scope="row"> Solution </th></tr><tr><td> Distillation produces little product; mostly heavy residue </td><td> Thermometer not positioned correctly (bulb too high); boiler temperature too low </td><td> Reposition thermometer so bulb is level with side arm; increase heat to 250-300¬∞C </td></tr><tr><td> Vapors condense in the distillation column (backflow) </td><td> Condenser water flow too high; external air temperature too cold </td><td> Reduce water flow rate to 2-3 L/min; insulate column jacket; maintain ambient >15¬∞C </td></tr><tr><td> High boiling point "heavy" fraction contains much lighter oil </td><td> Mixing of fractions in the apparatus; carryover from previous distillation </td><td> Thoroughly clean all glassware between runs; check condenser outlet alignment </td></tr><tr><td> Biodiesel remains cloudy after washing </td><td> Excess water; unreacted methanol; residual catalyst (KOH) </td><td> Wash again with fresh warm water; dry at 60¬∞C for 30 min; check original oil water content </td></tr><tr><td> Biodiesel freezes at room temperature (high pour point) </td><td> High saturated fatty acid content (palm, coconut oils); crystallization </td><td> Blend with petroleum diesel; use oils with lower saturated content; add pour point depressant </td></tr><tr><td> Engine detonates or pings with homemade biodiesel blends </td><td> Too much biodiesel (>30%) if engine not compatible; water or contaminants </td><td> Test with B20 (20% biodiesel) blend first; retest fuel for water; filter through 5 micron paper </td></tr></table></section><section><h2> Related Guides </h2><div class="related-guides"><div class="guide-card"><a href="chemistry-fundamentals.html"> Chemistry Fundamentals </a><p> Understanding chemical reactions in refining </p></div><div class="guide-card"><a href="home-management.html"> Heat Transfer and Furnaces </a><p> Designing efficient heating systems for distillation </p></div><div class="guide-card"><a href="home-management.html"> Storage and Containment </a><p> Safe handling of flammable liquids </p></div></div></section><div class="common-mistakes"><h3> Common Mistakes </h3><ul><li> Add specific common mistakes here based on the guide content </li></ul></div><div class="notes-section"><div class="notes-header"><span> My Notes </span><span class="notes-toggle"> ‚ñº </span></div><div class="notes-content"><textarea class="notes-textarea" id="guide-notes-text" placeholder='Add your personal notes here. They will be saved automatically.'></textarea><div class="notes-actions"><button class="save-notes-btn" id="save-notes-btn"> Save Notes </button><span class="notes-status" id="notes-status"></span></div></div></div><footer><p> Petroleum Refining Guide | Tier 1 Priority | Last Updated: 2026 </p><p> For offline reference. Petroleum products are flammable‚Äîhandle with appropriate safety protocols. </p></footer></div><button class="back-to-top" onclick="scrollToTop()"> ‚Üë Back to Top </button><script>
 function toggleTheme() {
 const html = document.documentElement;
 const btn = document.querySelector('.theme-toggle');
 const isDark = html.getAttribute('data-theme') === 'dark';
 html.setAttribute('data-theme', isDark ? 'light' : 'dark');
 btn.textContent = isDark ? '‚òÄÔ∏è Light' : 'üåô Dark';
 localStorage.setItem('theme', isDark ? 'light' : 'dark');
 }
 function toggleMarkRead() {
 const btn = document.querySelector('.mark-read-btn');
 const isRead = btn.classList.toggle('read');
 btn.textContent = isRead ? '‚úì Read' : 'Mark as Read';
 localStorage.setItem('petroleum-refining-read', isRead);
 }
 function addNote() {
 const note = document.getElementById('notes-area').value;
 localStorage.setItem('petroleum-refining-notes', note);
 }
 function loadNotes() {
 const saved = localStorage.getItem('petroleum-refining-notes');
 if (saved) document.getElementById('notes-area').value = saved;
 const isRead = localStorage.getItem('petroleum-refining-read') === 'true';
 if (isRead) {
 document.querySelector('.mark-read-btn').classList.add('read');
 document.querySelector('.mark-read-btn').textContent = '‚úì Read';
 }
 }
 function scrollToTop() {
 window.scrollTo({ top: 0, behavior: 'smooth' });
 }
 window.addEventListener('scroll', function() {
 const btn = document.querySelector('.back-to-top');
 btn.classList.toggle('show', window.scrollY > 300);
 });
 document.getElementById('notes-area').addEventListener('change', addNote);
 document.addEventListener('DOMContentLoaded', function() {
 const savedTheme = localStorage.getItem('theme') || 'dark';
 document.documentElement.setAttribute('data-theme', savedTheme);
 const btn = document.querySelector('.theme-toggle');
 btn.textContent = savedTheme === 'dark' ? 'üåô Dark' : '‚òÄÔ∏è Light';
 loadNotes();
 });
 </script><button id="back-to-top" title='Back to top'> ‚Üë </button><script>
 (function() {
 // Initialize theme from localStorage
 const savedTheme = localStorage.getItem('compendium-theme') || 'dark';
 document.documentElement.setAttribute('data-theme', savedTheme);
 // Theme toggle
 const themeToggle = document.getElementById('theme-toggle');
 if(themeToggle) {
 themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
 themeToggle.addEventListener('click', function() {
 const current = document.documentElement.getAttribute('data-theme');
 const next = current === 'dark' ? 'light' : 'dark';
 document.documentElement.setAttribute('data-theme', next);
 localStorage.setItem('compendium-theme', next);
 themeToggle.textContent = next === 'dark' ? '‚òÄÔ∏è' : 'üåô';
 });
 }
 // Progress tracking
 const guideId = location.pathname.split('/').pop().replace('.html', '');
 const progress = JSON.parse(localStorage.getItem('compendium-progress') || '{}');
 const markBtn = document.getElementById('mark-read-btn');
 if(markBtn) {
 if(progress[guideId]) {
 markBtn.textContent = '‚úì Completed';
 markBtn.classList.add('completed');
 }
 markBtn.addEventListener('click', function() {
 progress[guideId] = {
 completed: true,
 date: new Date().toISOString()
 };
 localStorage.setItem('compendium-progress', JSON.stringify(progress));
 markBtn.textContent = '‚úì Completed';
 markBtn.classList.add('completed');
 });
 }
 // Notes system
 const notesKey = 'compendium-notes-' + guideId;
 const notesArea = document.getElementById('guide-notes-text');
 const savedNotes = localStorage.getItem(notesKey) || '';
 if(notesArea) {
 notesArea.value = savedNotes;
 }
 const saveNotesBtn = document.getElementById('save-notes-btn');
 if(saveNotesBtn) {
 saveNotesBtn.addEventListener('click', function() {
 if(notesArea) {
 localStorage.setItem(notesKey, notesArea.value);
 const status = document.getElementById('notes-status');
 if(status) {
 status.textContent = 'Saved!';
 setTimeout(function() {
 status.textContent = '';
 }, 2000);
 }
 }
 });
 }
 // Notes toggle
 const notesHeader = document.querySelector('.notes-header');
 const notesContent = document.querySelector('.notes-content');
 const notesToggle = document.querySelector('.notes-toggle');
 if(notesHeader) {
 notesHeader.addEventListener('click', function() {
 if(notesContent) {
 notesContent.classList.toggle('open');
 }
 if(notesToggle) {
 notesToggle.classList.toggle('open');
 }
 });
 }
 // Back to top
 const backToTop = document.getElementById('back-to-top');
 if(backToTop) {
 window.addEventListener('scroll', function() {
 backToTop.style.display = window.scrollY > 300 ? 'block' : 'none';
 });
 backToTop.addEventListener('click', function() {
 window.scrollTo({top: 0, behavior: 'smooth'});
 });
 }
})();
 </script><script>
// Bookmark system
(function() {
 const guideName = window.location.pathname.split('/').pop();
 const bookmarks = JSON.parse(localStorage.getItem('compendium-bookmarks') || '{}');
 // Add bookmark icons to all h2 elements
 document.querySelectorAll('h2').forEach((h2, i) => {
 const id = h2.id || 'section-' + i;
 if (!h2.id) h2.id = id;
 const key = guideName + '#' + id;
 const btn = document.createElement('button');
 btn.className = 'bookmark-star';
 btn.textContent = bookmarks[key] ? '‚òÖ' : '‚òÜ';
 btn.style.cssText = 'background:transparent;border:none;font-size:1.3em;cursor:pointer;color:' + (bookmarks[key] ? 'var(--accent)' : 'var(--muted)') + ';margin-left:10px;vertical-align:middle;';
 btn.onclick = function(e) {
 e.preventDefault();
 const bm = JSON.parse(localStorage.getItem('compendium-bookmarks') || '{}');
 if (bm[key]) { delete bm[key]; btn.textContent = '‚òÜ'; btn.style.color = 'var(--muted)'; }
 else { bm[key] = { guide: guideName, section: h2.textContent.replace('‚òÜ','').replace('‚òÖ','').trim(), timestamp: Date.now() }; btn.textContent = '‚òÖ'; btn.style.color = 'var(--accent)'; }
 localStorage.setItem('compendium-bookmarks', JSON.stringify(bm));
 };
 h2.appendChild(btn);
 });
 // Add floating bookmarks panel button
 const panelBtn = document.createElement('button');
 panelBtn.innerHTML = 'üîñ';
 panelBtn.title = 'View Bookmarks';
 panelBtn.style.cssText = 'position:fixed;bottom:70px;right:20px;width:50px;height:50px;border-radius:50%;background:var(--accent2);color:white;border:none;font-size:1.5em;cursor:pointer;z-index:998;box-shadow:0 2px 8px rgba(0,0,0,0.3);';
 panelBtn.onclick = function() {
 const bm = JSON.parse(localStorage.getItem('compendium-bookmarks') || '{}');
 const guideBookmarks = Object.entries(bm).filter(([k]) => k.startsWith(guideName));
 let panel = document.getElementById('bookmark-panel');
 if (panel) { panel.remove(); return; }
 panel = document.createElement('div');
 panel.id = 'bookmark-panel';
 panel.style.cssText = 'position:fixed;bottom:130px;right:20px;width:300px;max-height:400px;overflow-y:auto;background:var(--surface);border:2px solid var(--accent2);border-radius:8px;padding:15px;z-index:999;box-shadow:0 4px 12px rgba(0,0,0,0.3);';
 let html = '<h4 style="color:var(--accent2);margin:0 0 10px 0;">üîñ Bookmarks in This Guide</h4>';
 if (guideBookmarks.length === 0) html += '<p style="color:var(--muted);">No bookmarks yet. Click ‚òÜ next to any heading to bookmark it.</p>';
 else guideBookmarks.forEach(([key, val]) => {
 const sectionId = key.split('#')[1];
 html += '<a href="#'+sectionId+'" style="display:block;padding:8px;margin:4px 0;background:var(--card);border-radius:4px;color:var(--text);text-decoration:none;" onclick="document.getElementById(\'bookmark-panel\').remove();">‚òÖ '+val.section+'</a>';
 });
 html += '<button onclick="this.parentElement.remove()" style="margin-top:10px;padding:6px 12px;background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:4px;cursor:pointer;width:100%;">Close</button>';
 panel.innerHTML = html;
 document.body.appendChild(panel);
 };
 document.body.appendChild(panelBtn);
})();
</script></main><script src="../shared/theme-sync.js"></script><script src="js/shared.js"></script></body></html>