export function initializeKeyboardShortcuts(e){document.addEventListener("keydown",t=>{"/"===t.key&&"INPUT"!==document.activeElement.tagName&&(t.preventDefault(),e()),"?"===t.key&&"INPUT"!==document.activeElement.tagName&&(t.preventDefault(),showKeyboardHelp()),"Escape"===t.key&&(closeSearchResults(),closeAchievementsModal())})}function showKeyboardHelp(){alert("\n    Keyboard Shortcuts:\n    / - Focus search\n    ? - Show this help\n    Escape - Close search/modals\n    Arrow Keys - Navigate cards\n    Enter/Space - Activate card\n    Tab - Navigate interactive elements\n  ")}function closeSearchResults(){const e=document.getElementById("search-results"),t=document.getElementById("search");e&&e.classList.contains("active")&&(e.classList.remove("active"),t&&t.setAttribute("aria-expanded","false"))}function closeAchievementsModal(){const e=document.getElementById("achievements-modal");e&&e.classList.contains("active")&&(e.classList.remove("active"),e.setAttribute("aria-hidden","true"))}export function initializeCardKeyboardNav(){document.querySelectorAll(".card[data-guide]").forEach(e=>{e.addEventListener("keydown",t=>{let n=null;const a=Array.from(document.querySelectorAll(".card[data-guide]")).filter(e=>"none"!==e.style.display),o=a.indexOf(e);"ArrowRight"===t.key||"ArrowDown"===t.key?(t.preventDefault(),n=a[o+1]):"ArrowLeft"===t.key||"ArrowUp"===t.key?(t.preventDefault(),n=a[o-1]):"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.click()),n&&n.focus()})})}function getFocusableElements(e){return Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(e=>!e.hasAttribute("disabled")&&null!==e.offsetParent)}export function trapFocusInModal(e,t){const n=getFocusableElements(e);if(0===n.length)return;const a=n[0],o=n[n.length-1];e.addEventListener("keydown",n=>{if("Escape"===n.key)return n.preventDefault(),t(),void e.setAttribute("aria-hidden","true");"Tab"===n.key&&(n.shiftKey?document.activeElement===a&&(n.preventDefault(),o.focus()):document.activeElement===o&&(n.preventDefault(),a.focus()))})}export function ensureFocusVisibility(){const e=document.createElement("style");e.textContent="\n    *:focus-visible {\n      outline: 2px solid var(--accent, #d4a574) !important;\n      outline-offset: 2px !important;\n    }\n  ",document.head.appendChild(e)}