function showToast(t,e=3e3){const o=document.createElement("div");o.className="share-toast",o.textContent=t,document.body.appendChild(o),setTimeout(()=>{o.classList.add("show")},10),setTimeout(()=>{o.classList.remove("show"),setTimeout(()=>{o.remove()},300)},e)}async function copyToClipboard(t){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(t),!0;{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();const o=document.execCommand("copy");return document.body.removeChild(e),o}}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}function generateShareUrl(t){return t.startsWith("http://")||t.startsWith("https://")?t:`${window.location.origin}${window.location.pathname}?guide=${encodeURIComponent(t)}`}export async function shareGuide(t,e){try{if(navigator.share)return await navigator.share({title:e,text:`Check out this guide: ${e}`,url:generateShareUrl(t)}),!0;{const e=generateShareUrl(t),o=await copyToClipboard(e);return showToast(o?"Link copied to clipboard!":"Failed to copy link"),o}}catch(t){return"AbortError"!==t.name&&(console.error("Share failed:",t),showToast("Failed to share guide")),!1}}export function initShareButtons(){document.querySelectorAll(".card .share-btn").forEach(t=>{t.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const o=t.closest(".card");if(!o)return;const r=o.querySelector("h3")?.textContent||"Guide",a=o.getAttribute("href")||"";await shareGuide(a,r)})})}export function addShareButtonToCard(t){if(t.querySelector(".share-btn"))return;const e=document.createElement("button");e.className="share-btn",e.setAttribute("type","button"),e.setAttribute("aria-label","Share this guide"),e.setAttribute("title","Share this guide"),e.innerHTML="ðŸ”—",t.appendChild(e),e.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation();const o=t.querySelector("h3")?.textContent||"Guide",r=t.getAttribute("href")||"";await shareGuide(r,o)})}